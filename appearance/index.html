<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://modir.github.io/appearance/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Page Appearance and Layout - Using Laminas Framework</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Page Appearance and Layout";
        var mkdocs_page_input_path = "appearance.md";
        var mkdocs_page_url = "/appearance/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Using Laminas Framework
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Preface</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../intro/">None</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../acknowledgments/">Acknowledgments</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../intro/">Introduction to Laminas Framework</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../skeleton/">Laminas Skeleton Application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../operation/">Website Operation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mvc/">Model-View-Controller</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../routing/">Routing</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Page Appearance and Layout</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#about-css-stylesheets-and-twitter-bootstrap">About CSS Stylesheets and Twitter Bootstrap</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#page-layout-in-laminas-framework">Page Layout in Laminas Framework</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#modifying-the-default-page-layout">Modifying the Default Page Layout</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#switching-between-layouts">Switching between Layouts</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#setting-layout-for-all-actions-of-a-controller">Setting Layout for All Actions of a Controller</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#partial-views">Partial Views</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#placeholder-view-helper">Placeholder View Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#adding-scripts-to-a-web-page">Adding Scripts to a Web Page</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#adding-css-stylesheets-to-a-web-page">Adding CSS Stylesheets to a Web Page</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example_1">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#writing-own-view-helpers">Writing Own View Helpers</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#menu">Menu</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#breadcrumbs">Breadcrumbs</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#view-models-and-page-composition">View Models and Page Composition</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../forms/">Collecting User Input with Forms</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../filters/">Transforming Input Data with Filters</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../validators/">Checking Input Data with Validators</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../uploads/">Uploading Files with Forms</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../forms_advanced/">Advanced Usage of Forms</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../doctrine/">Database Management with Doctrine ORM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../doctrine_migrations/">Database Migrations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../modules/">Creating a New Module</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../session/">Working with Sessions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../users/">User Management, Authentication and Access Filtering</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../roles/">Role-Based Access Control</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../devenv/">Appendix A. Configuring Web Development Environment</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../netbeans/">Appendix B. Introduction to PHP Development in NetBeans IDE</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../bootstrap/">Appendix C. Introduction to Twitter Bootstrap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../doctrine_intro/">Appendix D. Introduction to Doctrine</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ec2_tutorial/">Appendix E. Installing a Laminas Web Application to Amazon EC2</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Using Laminas Framework</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Page Appearance and Layout</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/modir/laminas-book/edit/main/docs/appearance.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="page-appearance-and-layout">Page Appearance and Layout</h1>
<p>In this chapter you will learn how to make your web pages attractive and
professionally looking with the help of Twitter Bootstrap CSS Framework and
how to position elements on a page using Laminas layout mechanism. You'll also
become familiar with common view helpers allowing for composing web pages
of reusable parts. If you are new to Twitter Bootstrap, it is also recommended
that you refer to <a href="#bootstrap">Appendix C. Introduction to Twitter Bootstrap</a> for advanced description of Bootstrap
capabilities.</p>
<p>Laminas components covered in this chapter:</p>
<table>
<thead>
<tr>
<th><em>Component</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>@<code>Laminas\Mvc</code></td>
<td>Support of MVC pattern. Implements base controller classes, controller plugins, etc.</td>
</tr>
<tr>
<td>@<code>Laminas\View</code></td>
<td>Implements the functionality for variable containers, rendering a web page and common view helpers.</td>
</tr>
</tbody>
</table>
<h2 id="about-css-stylesheets-and-twitter-bootstrap">About CSS Stylesheets and Twitter Bootstrap</h2>
<p>In a laminas-based web site, for defining the visual appearance and style of the web pages,
CSS stylesheets are utilized. These CSS <sup id="fnref:css"><a class="footnote-ref" href="#fn:css">1</a></sup> files are typically stored in
<em>APP_DIR/public/css</em> directory.</p>
<p>Because the CSS rules may be rather complex and require laborious adjustment and
the skills of a designer, they can be separated in a "library" (framework). Analogous
to PHP frameworks, CSS frameworks allow for code reusability.</p>
<p>Today, several CSS frameworks exist on the market, and one of them is
<a href="http://getbootstrap.com/">Twitter Bootstrap</a> (or shortly, the Bootstrap).
Originally designed at Twitter to unify the appearance of
their own web tools, Bootstrap has became a popular CSS framework, allowing to make
your web site professionally looking and visually appealing, even if you don't have
advanced designer skills and without the need of creating basic CSS rules (but, of course
you can define your own custom CSS rules on top of Bootstrap to customize your site's
appearance). Bootstrap is freely distributed under the
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License v.2.0</a>.</p>
<blockquote>
<p>Twitter Bootstrap is shipped with Laminas Skeleton Application, so you
can use it out of the box. Alternatively, you can download the newest
version of Bootstrap from the project's <a href="http://getbootstrap.com/">official page</a>.
At the moment of writing this book, the latest version is v.3.x.</p>
</blockquote>
<p>Generally, the Bootstrap does the following things:</p>
<ul>
<li>
<p>It provides the <em>CSS reset</em> that is a style sheet defining styles for all possible
  HTML elements. This ensures your web site will look the same way in all web browsers.</p>
</li>
<li>
<p>It provides the <em>base CSS rules</em> that define style of typography (headings
  and text), tables, forms, buttons, images and so on.</p>
</li>
<li>
<p>It defines the <em>grid system</em>. The grid system allows to arrange elements
  on your web page in a grid-like structure. For example, look at the
  Skeleton Application's main page (figure 6.1), where we have the grid
  consisting of three columns.</p>
</li>
<li>
<p>It defines useful <em>web interface components</em> like dropdown menus, navigation
  bars, breadcrumbs, pagination and so on. For example, on the skeleton app's
  main page, there is the navigation bar component at the top, and the header
  (also called the Hero Unit or Jumbotron) component below the navbar. These components
  are very handy on any web site.</p>
</li>
<li>
<p>In includes the <em>JavaScript extensions</em> that allow to make Bootstrap-provided
  interface components more interactive. For example, JavaScript is used to animate
  dropdown menus and display "modal dialogs".</p>
</li>
</ul>
<p><img alt="Figure 6.1. Main page of the skeleton app and its layout" src="../images/appearance/skeleton-layout.png" /></p>
<blockquote>
<p>If you are new to Twitter Bootstrap, it is recommended that you refer to
<a href="#bootstrap">Appendix C. Introduction to Twitter Bootstrap</a>, where you can find more information about using
Twitter Bootstrap and its components.</p>
</blockquote>
<h2 id="page-layout-in-laminas-framework">Page Layout in Laminas Framework</h2>
<p>Pages of your web site typically have some common structure that can be shared among them.
For example, a typical page has the <code>&lt;!DOCTYPE&gt;</code> declaration to identify the HTML document,
and the <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> elements:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;title&gt;Welcome&lt;/title&gt;
    &lt;!-- Include metas, stylesheets and scripts here --&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- Include page content here --&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>The <code>&lt;head&gt;</code> element contains the page title text, meta information
and references to included stylesheets and scripts. The <code>&lt;body&gt;</code> element
contains the content of the page, like the logo image, the navigation bar,
the page text, and the footer with copyright information.</p>
<p>In Laminas Framework, you define this common structure with the "master" view
template called the <em>layout</em>. The layout "decorates" other view templates.</p>
<p>The layout template typically has a <em>placeholder</em> in which Laminas
puts the content specific to a particular page (see figure 6.2 for example).</p>
<p><img alt="Figure 6.2. Content placeholder in layout template" src="../images/appearance/layout_placeholder.png" /></p>
<p>In the Skeleton Application, the default layout template file is called <em>layout.phtml</em>
and is located inside of the <em>view/layout</em> directory in <em>Application</em> module's
directory (see figure 6.3 for example).</p>
<p><img alt="Figure 6.3. Layout directory" src="../images/appearance/layout_dir.png" /></p>
<p>Let's look at the <em>layout.phtml</em> template file in more details.
Below, the complete contents of the file is presented:</p>
<pre><code class="language-php">&lt;?= $this-&gt;doctype() ?&gt;

&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;?= $this-&gt;headTitle('ZF Skeleton Application')
             -&gt;setSeparator(' - ')-&gt;setAutoEscape(false) ?&gt;

    &lt;?= $this-&gt;headMeta()
          -&gt;appendName('viewport', 'width=device-width, initial-scale=1.0')
          -&gt;appendHttpEquiv('X-UA-Compatible', 'IE=edge')
    ?&gt;

    &lt;!-- Le styles --&gt;
    &lt;?= $this-&gt;headLink(['rel' =&gt; 'shortcut icon', 'type' =&gt; 'image/vnd.microsoft.icon',
                         'href' =&gt; $this-&gt;basePath() . '/img/favicon.ico'])
        -&gt;prependStylesheet($this-&gt;basePath('css/style.css'))
        -&gt;prependStylesheet($this-&gt;basePath('css/bootstrap-theme.min.css'))
        -&gt;prependStylesheet($this-&gt;basePath('css/bootstrap.min.css'))
    ?&gt;

    &lt;!-- Scripts --&gt;
    &lt;?= $this-&gt;headScript()
        -&gt;prependFile($this-&gt;basePath('js/bootstrap.min.js'))
        -&gt;prependFile($this-&gt;basePath('js/jquery-2.2.4.min.js'))
    ?&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;nav class=&quot;navbar navbar-inverse navbar-fixed-top&quot; role=&quot;navigation&quot;&gt;
        &lt;div class=&quot;container&quot;&gt;
          &lt;div class=&quot;navbar-header&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;navbar-toggle&quot; data-toggle=&quot;collapse&quot;
                    data-target=&quot;.navbar-collapse&quot;&gt;
              &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
              &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
              &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;/button&gt;
            &lt;a class=&quot;navbar-brand&quot; href=&quot;&lt;?php echo $this-&gt;url('home') ?&gt;&quot;&gt;
              &lt;img src=&quot;&lt;?= $this-&gt;basePath('img/zf-logo.png') ?&gt;&quot;
                   alt=&quot;Laminas Framework &lt;?= \Application\Module::VERSION ?&gt;&quot;/&gt;
                   &amp;nbsp;Skeleton Application
            &lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;collapse navbar-collapse&quot;&gt;
            &lt;ul class=&quot;nav navbar-nav&quot;&gt;
              &lt;li class=&quot;active&quot;&gt;
                &lt;a href=&quot;&lt;?= $this-&gt;url('home') ?&gt;&quot;&gt;Home&lt;/a&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/nav&gt;
      &lt;div class=&quot;container&quot;&gt;
        &lt;?= $this-&gt;content; ?&gt;
        &lt;hr&gt;
        &lt;footer&gt;
          &lt;p&gt;&amp;copy; 2005 - &lt;?= date('Y') ?&gt; by Laminas Technologies Ltd.
            All rights reserved.
          &lt;/p&gt;
        &lt;/footer&gt;
      &lt;/div&gt;
      &lt;?= $this-&gt;inlineScript() ?&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>You can see that the <em>layout.phtml</em> file (as a usual view template) consists of HTML
tags mixed with PHP code fragments. When the template is being rendered, Laminas evaluates
the inline PHP fragments and generates resulting HTML page visible to site users.</p>
<p>Line 1 above generates the <code>&lt;!DOCTYPE&gt;</code> <sup id="fnref:doctype"><a class="footnote-ref" href="#fn:doctype">2</a></sup> declaration of the HTML page
with the @<code>Doctype</code> view helper.</p>
<p>Line 3 defines the <code>&lt;html&gt;</code> element representing the root of the HTML document.
The <code>&lt;html&gt;</code> tag is followed by the <code>&lt;head&gt;</code> tag (line 4), which typically
contains a title for the document, and can include other information like scripts,
CSS styles and meta information.</p>
<p>In line 5, the <code>&lt;meta&gt;</code> tag provides the browser with a hint that the document
is encoded using UTF-8 <sup id="fnref:utf8"><a class="footnote-ref" href="#fn:utf8">3</a></sup> character encoding.</p>
<p>In line 6, we have the @<code>HeadTitle</code> view helper that allows to define the title for the
page ("ZF Skeleton Application"). The title will be displayed in the web browser's caption.
The <code>setSeparator()</code> method is used to define the separator character for the compound page
titles<sup id="fnref:compound"><a class="footnote-ref" href="#fn:compound">4</a></sup>; the <code>setAutoEscape()</code> method enhances the security by escaping unsafe characters from
the page title.</p>
<p>In line 9, the @<code>HeadMeta</code> view helper allows to define the <code>&lt;meta name="viewport"&gt;</code>
tag containing meta information for the web browser to control layout on different display
devices, including mobile browsers. The <code>width</code> property controls the size of the
viewport, while the <code>initial-scale</code> property controls the zoom level when the page
is loaded. This makes the web page layout "responsive" to device viewport size.</p>
<p>In line 15, the @<code>HeadLink</code> view helper allows to define the <code>&lt;link&gt;</code> tags.
With the <code>&lt;link&gt;</code> tags, you typically define the "favicon" for the page
(located in <code>APP_DATA/public/img/favicon.ico</code> file)
and the CSS stylesheets.</p>
<p>In lines 17-19, the stylesheets common to all site pages are included by
the <code>prependStylesheet()</code> method of the @<code>HeadLink</code> view helper. Any page
in our website will load three CSS stylesheet files: <em>bootstrap.min.css</em>
(the minified version of Twitter Bootstrap CSS Framework),
<em>bootstrap-theme.min.css</em> (the minified Bootstrap theme stylesheet)
and <em>style.css</em> (CSS file allowing us to define our own CSS rules overriding
Bootstrap CSS rules).</p>
<p>Lines 23-25 include the JavaScript files that all your web pages will load.
The scripts are executed by the client's web browser, allowing
to introduce some interactive features for your pages. We use the <code>bootstrap.min.js</code>
(minified version of Twitter Bootstrap) and <code>jquery-2.2.4.min.js</code> (minified version of
jQuery library) scripts. All scripts are located in <em>APP_DIR/public/js</em> directory.</p>
<p>Line 28 defines the <code>&lt;body&gt;</code> tag, the document's body which contains all
the contents of the document, such as the navigation bar, text, hyperlinks,
images, tables, lists, etc.</p>
<p>In lines 29-52, you can recognize the Bootstrap navigation bar definition.
The skeleton application uses the collapsible navbar with dark inverse theme.
The navbar contains the single link <em>Home</em>.</p>
<p>If you look at lines 53-61, you should notice the <code>&lt;div&gt;</code> element with <code>container</code> class
which denotes the container element for the grid system. So, you can use the Bootstrap
grid system to arrange the contents of your pages.</p>
<p>Line 54 is very important, because this line defines the inline PHP code that represents the
page content placeholder we talked about in the beginning of this section. When the Laminas page renderer
evaluates the layout template, it echoes the actual page content here.</p>
<p>Lines 56-60 define the page footer area. The footer contains the copyright
information like "2016 by Laminas Technologies Ltd. All rights reserved." You
can replace this information with you own company name.</p>
<p>Line 62 is the placeholder for JavaScript scripts loaded by the
concrete page. The @<code>InlineScript</code> view helper will substitute here
all the scripts you register (about registering JavaScript scripts,
you will see it later in this chapter).</p>
<p>And finally, lines 63-64 contain the closing tags for the body and the HTML
document.</p>
<h2 id="modifying-the-default-page-layout">Modifying the Default Page Layout</h2>
<p>To demonstrate how you can define your own page layout, we will modify the original layout of
the Laminas Skeleton Application website. We want to make it display the "Hello world" page title,
the "Hello world!" header text at the top, the navigation bar and breadcrumbs below the header,
page content placeholder in the middle of the page, and the footer with the copyright information
at the bottom (see figure 6.4 for an example of what we are trying to achieve).</p>
<p><img alt="Figure 6.4. Resulting Page Layout" src="../images/appearance/mainpage.png" /></p>
<p>Let's start with the "Hello World" page title. We replace the lines 6-7 in the <em>layout.phtml</em>
file as follows:</p>
<pre><code class="language-php">&lt;?= $this-&gt;headTitle('Hello World')-&gt;setSeparator(' - ')-&gt;setAutoEscape(false) ?&gt;
</code></pre>
<p>Next, we will use the Bootstrap-provided grid system for arranging the main blocks on the page.
Replace the HTML code of the <code>&lt;body&gt;</code> element (lines 28-63) with the following one:</p>
<pre><code class="language-php">&lt;body&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;row&quot;&gt;
      &lt;!-- Page header --&gt;
      &lt;div class=&quot;col-md-4&quot;&gt;
        &lt;div class=&quot;app-caption&quot;&gt;Hello World!&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row&quot;&gt;
      &lt;div class=&quot;col-md-12&quot;&gt;
        &lt;!-- Navigation bar --&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row&quot;&gt;
      &lt;div class=&quot;col-md-12&quot;&gt;
        &lt;!-- Breadcrumbs --&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row&quot;&gt;
      &lt;div class=&quot;col-md-12&quot;&gt;
        &lt;!-- Page content placeholder --&gt;
        &lt;?= $this-&gt;content; ?&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row&quot;&gt;
      &lt;div class=&quot;col-md-12&quot;&gt;
        &lt;hr&gt;
        &lt;p&gt;&amp;copy; 2005 - &lt;?= date('Y') ?&gt; by Your Company. All rights reserved.&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt; &lt;!-- /container --&gt;
  &lt;?php echo $this-&gt;inlineScript() ?&gt;
&lt;/body&gt;
</code></pre>
<p>In the code above, we defined the <code>&lt;div&gt;</code> element with the <code>container</code> class and put
the <code>&lt;div&gt;</code> elements of the grid inside of it. The grid consists of 5 rows:</p>
<ul>
<li>
<p>The page header containing the "Hello World!" text (lines 3-8). The header text
    spans four grid columns. For styling the text, we use our custom CSS class <code>app-caption</code>
    (we will define this class in <em>style.css</em> file a little bit later).</p>
</li>
<li>
<p>We left the space for navigation bar interface component in line 11.</p>
</li>
<li>
<p>In line 16, we have the space for breadcrumbs component.</p>
</li>
<li>
<p>In line 22, we have the page content placeholder. When the renderer
    evaluates the page, it will echo the value of the <code>$content</code> variable, so the actual
    page content will be substituted here.</p>
</li>
<li>
<p>And in lines 25-29, we provided the page footer with the text "(c) 2013 by Your Company.
    All rights reserved." You can change this text and substitute your company name here,
    if you wish.</p>
</li>
</ul>
<p>Next, we put the navigation bar in the corresponding grid row:</p>
<pre><code class="language-php">&lt;!-- Navigation bar --&gt;
&lt;nav class=&quot;navbar navbar-default&quot; role=&quot;navigation&quot;&gt;
  &lt;div class=&quot;collapse navbar-collapse navbar-ex1-collapse&quot;&gt;
    &lt;ul class=&quot;nav navbar-nav&quot;&gt;
      &lt;li class=&quot;active&quot;&gt;
        &lt;a href=&quot;&lt;?= $this-&gt;url('home') ?&gt;&quot;&gt;Home&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href=&quot;&lt;?= $this-&gt;url('application', ['action'=&gt;'downloads']) ?&gt;&quot;&gt;
          Downloads
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li class=&quot;dropdown&quot;&gt;
        &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;
          Support &lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;
          &lt;ul class=&quot;dropdown-menu&quot;&gt;
            &lt;li&gt;
              &lt;a href=&quot;&lt;?= $this-&gt;url('doc', ['page'=&gt;'contents']) ?&gt;&quot;&gt;
                Documentation
              &lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
              &lt;a href=&quot;&lt;?= $this-&gt;url('static', ['page'=&gt;'help']) ?&gt;&quot;&gt;
                Help
              &lt;/a&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href=&quot;&lt;?= $this-&gt;url('about') ?&gt;&quot;&gt;About&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
    &lt;/div&gt;
&lt;/nav&gt;
</code></pre>
<p>In the code above, we used the navbar interface component provided by the Bootstrap.
We also used the @<code>Url</code>[Laminas\View\Helper\Url] view helper to insert the links to the navigation items.</p>
<blockquote>
<p>We discussed the usage of the @<code>Url</code>[Laminas\View\Helper\Url] view helper in the <em>Generating URLs from Route</em> section
in <a href="#routing">Routing</a>.</p>
</blockquote>
<p>Next, put the breadcrumbs component to the corresponding grid row:</p>
<pre><code class="language-php">&lt;!-- Breadcrumbs --&gt;
&lt;ol class=&quot;breadcrumb&quot;&gt;
  &lt;li class=&quot;active&quot;&gt;Home&lt;/li&gt;
&lt;/ol&gt;
</code></pre>
<p>Finally, we need to provide a couple of custom CSS rules to fine-tune the
look and feel. We define our own CSS rules in the <em>style.css</em> stylesheet.</p>
<p>We want to make the "Hello World!" header text to use larger bold font and use a nice looking color.
To do this, open the <em>style.css</em> file, and append the following lines to the end:</p>
<pre><code class="language-css">div.app-caption {
  padding: 25px 0px;
  font-size: 3.0em;
  font-weight: bold;
  color: #6aacaf
}
</code></pre>
<p>In the CSS code above, we created the <code>app-caption</code> class which can be applied to <code>&lt;div&gt;</code>
element and defining the 25 pixels vertical padding, large font size, bold text style and the
hexadecimal representation of the RGB text color.</p>
<p>By default, in skeleton application, the navbar is pinned to page top, and the CSS
rule for the page body defines the 20 pixels top padding to leave space for it.
Since in our Hello World example we've unpinned the navigation bar from top of the page and
placed it in page flow, we need to remove the padding from page body top. To do that, edit
the <code>body</code> CSS rule in the <code>style.css</code> file and make it look like the one below:</p>
<pre><code class="language-css">body {
  padding-bottom: 40px;
}
</code></pre>
<p>Great, we've completed the page layout template! To see the result of our changes,
open the site in your browser, you should see the page as in figure 6.4. You can click
the links in navigation bar to visit the pages like <em>About</em> or <em>Documentation</em>, etc.
The content of a particular page is put into the content placeholder of our layout.</p>
<blockquote>
<p>The result can be seen in action in
the <em>Hello World</em> sample application that is part of this book's example
code available on GitHub.</p>
</blockquote>
<h2 id="switching-between-layouts">Switching between Layouts</h2>
<p>By default, Laminas provides you with a single layout template <em>layout.phtml</em>.
In real-life applications, you will probably need to have several layouts
and switch the layout for certain controller/action.</p>
<p>For example, you may have a front-end and a back-end part of your site. The front-end
part would consist of web pages publicly visible to all users and would utilize the default layout
for all of these pages. The back-end part would consist of pages visible to the administrator user
only and utilize another layout template containing the administrative menu.</p>
<p>First, prepare another layout template file. For example, call it <em>layout2.phtml</em>.
To simplify the file preparation, copy the content of the default <em>layout.phtml</em> file and
make the necessary changes.</p>
<p>When the second layout template is ready, you can switch between layouts for
a particular controller's action by using the following code:</p>
<pre><code class="language-php">// A controller's action method that uses an alternative
// layout template.
public function indexAction()
{
  //...

  // Use the Layout plugin to access the ViewModel
  // object associated with layout template.
  $this-&gt;layout()-&gt;setTemplate('layout/layout2');

  //...
}
</code></pre>
<p>In the example action method above, we use the @<code>Layout</code>[Laminas\Mvc\Controller\Plugin\Layout] controller plugin (line 9)
that allows to access the instance of the @<code>ViewModel</code>[Laminas\View\Model\ViewModel] class associated with the
layout template. To change the layout template for this particular action method,
we called the <code>setTemplate()</code> method provided by the <code>ViewModel</code> class.</p>
<blockquote>
<p>In addition to the @<code>Layout</code>[Laminas\Mvc\Controller\Plugin\Layout] controller plugin, there is the @<code>Layout</code>[Laminas\View\Helper\Layout] view helper
which provides the same capabilities. With the @<code>Layout</code>[Laminas\View\Helper\Layout] view helper, you can, for
example, switch layout from the "static" page which has no specific controller action.</p>
</blockquote>
<h3 id="setting-layout-for-all-actions-of-a-controller">Setting Layout for All Actions of a Controller</h3>
<p>If all action methods of a controller class need to use the same alternative layout,
you can override the <code>onDispatch()</code> method of the @<code>AbstractActionController</code>
class and call the <code>setTemplate()</code> method there, as shown in the example below:</p>
<pre><code class="language-php">// Add this alias in the beginning of the controller file
use Laminas\Mvc\MvcEvent;

// ...

class IndexController extends AbstractActionController
{
  /**
   * We override the parent class' onDispatch() method to
   * set an alternative layout for all actions in this controller.
   */
  public function onDispatch(MvcEvent $e)
  {
    // Call the base class' onDispatch() first and grab the response
    $response = parent::onDispatch($e);

    // Set alternative layout
    $this-&gt;layout()-&gt;setTemplate('layout/layout2');

    // Return the response
    return $response;
  }
}
</code></pre>
<h2 id="partial-views">Partial Views</h2>
<p>A <em>partial</em> view is a <em>.phtml</em> view template file which can be rendered by another
view template. Partial views allow to compose your page of pieces and reuse pieces
of view rendering logic across different view templates.</p>
<p>For a simple example of partial view usage, let's imagine that we need to render a table
of some products. Each product has the ID, the name and the price. We can use partial
view template to render a single row of the table several times.</p>
<p>First, let's add the <code>partialDemoAction()</code> method to the Index controller:</p>
<pre><code class="language-php">// An action that demonstrates the usage of partial views.
public function partialDemoAction()
{
  $products = [
    [
      'id' =&gt; 1,
      'name' =&gt; 'Digital Camera',
      'price' =&gt; 99.95,
    ],
    [
      'id' =&gt; 2,
      'name' =&gt; 'Tripod',
      'price' =&gt; 29.95,
    ],
    [
      'id' =&gt; 3,
      'name' =&gt; 'Camera Case',
      'price' =&gt; 2.99,
    ],
    [
      'id' =&gt; 4,
      'name' =&gt; 'Batteries',
      'price' =&gt; 39.99,
    ],
    [
      'id' =&gt; 5,
      'name' =&gt; 'Charger',
      'price' =&gt; 29.99,
    ],
  ];

  return new ViewModel(['products' =&gt; $products]);
}
</code></pre>
<p>The action method above just prepares an array of products
for rendering and passes it to the view template with
the help of the @<code>ViewModel</code>[Laminas\View\Model\ViewModel] variable container.</p>
<p>Next, add the <em>partial-demo.phtml</em> template file:</p>
<pre><code class="language-php">&lt;?php
$this-&gt;headTitle('Partial View Demo');
?&gt;

&lt;h1&gt;Partial View Demo&lt;/h1&gt;
&lt;p&gt;
    Below, the table of products is presented. It is rendered with the help of
    partial views.
&lt;/p&gt;
&lt;table class=&quot;table table-striped table-hover&quot;&gt;
  &lt;tr&gt;
    &lt;th&gt;ID&lt;/th&gt;
    &lt;th&gt;Product&lt;/th&gt;
    &lt;th&gt;Price&lt;/th&gt;
  &lt;/tr&gt;

  &lt;?php
    foreach ($this-&gt;products as $product) {
      echo $this-&gt;partial('application/index/table-row', ['product'=&gt;$product]);
    }
  ?&gt;
&lt;/table&gt;
</code></pre>
<p>In the view template above, we define the markup for the table of products
(lines 10-22). In line 18, we walk through the items of the products
array and render each row with the @<code>Partial</code> view helper.</p>
<p>The first argument of the @<code>Partial</code> view helper is the name of the partial
view template file ("application/index/table-row").</p>
<p>The second argument of the @<code>Partial</code> view helper should be an array of arguments
passed to the view template. They will be accessible the same way as if you would pass
them with the @<code>ViewModel</code>[Laminas\View\Model\ViewModel] variable container.</p>
<p>Finally, create the <em>table-row.phtml</em> view template, which will be used as the partial
view template:</p>
<pre><code class="language-php">&lt;tr&gt;
  &lt;td&gt; &lt;?= $this-&gt;product['id'] ?&gt; &lt;/td&gt;
  &lt;td&gt; &lt;?= $this-&gt;product['name'] ?&gt; &lt;/td&gt;
  &lt;td&gt; &lt;?= $this-&gt;product['price'] ?&gt; &lt;/td&gt;
&lt;/tr&gt;
</code></pre>
<p>In the view template above, we just render a single row of the table.</p>
<p>To see the resulting web page, type "http://localhost/application/partial-demo" URL
in your browser's navigation bar. You should see something like in figure 6.5.</p>
<p><img alt="Figure 6.5. Table rows are rendered by partial views" src="../images/appearance/partial_demo.png" /></p>
<h2 id="placeholder-view-helper">Placeholder View Helper</h2>
<p>The @<code>Placeholder</code>[Laminas\View\Helper\Placeholder] is another useful view helper allowing for capturing HTML
content and storing <sup id="fnref:store"><a class="footnote-ref" href="#fn:store">5</a></sup> it for later use. Thus, analogous to the @<code>Partial</code>
view helper, it allows to compose your page of several pieces.</p>
<p>For example, you can use the @<code>Placeholder</code>[Laminas\View\Helper\Placeholder] view helper in pair with the @<code>Partial</code>
view helper to "decorate" the content of a view template with another view template. A useful
practical application for this is layout "inheritance".</p>
<p>Imagine the situation, when you need to create an alternative layout which has exactly the same
head section, header and the footer, but has differences in the middle page section. The "brute force"
way for making such a layout would be to copy and paste the content of the original layout template,
and make necessary changes. Another (better) way is "inheriting" the original one, when the resulting
layout will reuse the common parts.</p>
<p>To demonstrate how to inherit a layout, we will create the <em>layout2.phtml</em> view template,
which will inherit the default <em>layout.phtml</em> template, and add the Ads bar at the right of
the page. Keeping ads in layout would be useful, if you plan to profit from displaying
commercial ads on all (or on most) pages of your site.</p>
<p>Put the following code in the <em>layout2.phtml</em> template file:</p>
<pre><code class="language-php">&lt;?php $this-&gt;placeholder('content')-&gt;captureStart(); ?&gt;

&lt;div class=&quot;row&quot;&gt;
    &lt;div class=&quot;col-md-8&quot;&gt;
    &lt;?= $this-&gt;content; ?&gt;
    &lt;/div&gt;
    &lt;div class=&quot;col-md-4&quot;&gt;
        &lt;div class=&quot;panel panel-default&quot;&gt;
          &lt;div class=&quot;panel-heading&quot;&gt;
            &lt;h3 class=&quot;panel-title&quot;&gt;Ads&lt;/h3&gt;
          &lt;/div&gt;
          &lt;div class=&quot;panel-body&quot;&gt;
            &lt;strong&gt;Laminas Framework Book&lt;/strong&gt;
            &lt;p&gt;Learn how to create modern web applications with PHP
                and Laminas Framework&lt;/p&gt;
            &lt;a target=&quot;_blank&quot;
               href=&quot;https://github.com/olegkrivtsov/using-laminas-framework-book&quot;&gt;
               Learn More
            &lt;/a&gt;
          &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;?php
  $this-&gt;placeholder('content')-&gt;captureEnd();
  echo $this-&gt;partial('layout/layout',
          ['content'=&gt;$this-&gt;placeholder('content')]);
?&gt;
</code></pre>
<p>In the code above, we call the <code>captureStart()</code> method (line 1) and <code>captureEnd()</code>
method (line 26) of the @<code>Placeholder</code>[Laminas\View\Helper\Placeholder] view helper to delimit the HTML markup that
will be captured by the view helper and stored in its internal storage (instead
of rendering to PHP standard output stream).</p>
<p>In lines 3-23, we put the markup of the "inherited" layout. The derived layout
uses the two-cell grid. The first cell of the grid (spanning 8 columns) will contain the actual
content of a certain page, and the second cell (spanning 4 columns) will contain
advertisements. For styling the ads, we utilize the <em>Panel</em> interface
component provided by the Twitter Bootstrap.</p>
<p>In line 27, we use the @<code>Partial</code> view helper which is used to render the "parent"
layout (<em>layout.phtml</em>). We pass the content captured by the @<code>Placeholder</code>[Laminas\View\Helper\Placeholder] view
helper to the @<code>Partial</code> view helper as the second argument.</p>
<p>This way, we produced the nice-looking layout which inherits the default layout
and improves the code reusability.</p>
<p>Now, if you set the <em>layout2.phtml</em> for all actions of, say Index controller,
you should be able to see the result as in figure 6.6.</p>
<p><img alt="Figure 6.6. Inherited layout" src="../images/appearance/inherited_layout.png" /></p>
<h2 id="adding-scripts-to-a-web-page">Adding Scripts to a Web Page</h2>
<p>JavaScript code can be inserted into HTML pages and make them interactive.
Scripts should be inserted to an HTML file between <code>&lt;script&gt;</code> and <code>&lt;/script&gt;</code> tags.
Below, an example JavaScript code is presented:</p>
<pre><code class="language-php">&lt;script type=&quot;text/javascript&quot;&gt;
  // Show a simple alert window with the &quot;Hello World!&quot; text.
  $(document).ready(function() {
    alert('Hello World!');
  });
&lt;/script&gt;
</code></pre>
<p>In the example above, we created the <code>&lt;script&gt;</code> element, and put the jQuery callback function in it.
The jQuery binds a function to be executed when the DOM has finished loading. When the function is executed, a simple
alert window with the "Hello World!" text and OK button will appear.</p>
<p>Since you put this JavaScript code inside the HTML file, we will refer to it as <em>inline</em> script.
An alternative way of storing JavaScript code is putting it in an <em>external</em> <code>.js</code> file.
External files typically contain code that is designed to be used by
several web pages. Typically, external JavaScript files are stored in <em>APP_DIR/public/js/</em> directory. To link
an external JS file to your HTML page, you add the <code>&lt;script&gt;</code> element like below:</p>
<pre><code class="language-php">&lt;script type=&quot;text/javascript&quot; src=&quot;/js/yourscript.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>When the browser encounter such a <code>&lt;script&gt;</code> element, it reads the external JS file
and executes the code.</p>
<p>Generally, there are two places inside an HTML file where you can put the script:</p>
<ul>
<li>
<p>JavaScript code can be put in the <code>&lt;head&gt;</code> section of an HTML page.
  This method is recommended to use when you need JavaScript to be loaded before the content
  of the page. We used this method for loading the Twitter Bootstrap JavaScript extensions
  and jQuery library.</p>
</li>
<li>
<p>Script can be placed at the bottom of the <code>&lt;body&gt;</code> section of an HTML page, just
  before the closing <code>&lt;/body&gt;</code> tag. This way is acceptable when you need the entire DOM<sup id="fnref:dom"><a class="footnote-ref" href="#fn:dom">6</a></sup>
  to be loaded before the script can start executing.</p>
</li>
</ul>
<p>If a certain JavaScript file needs to be used on all (or on most) of the web pages,
it is better to place it in layout view template. But when a script needs to be
used on a single page only, putting it in the layout template is not the best idea.
If you put such a script to layout template, the script will be loaded to all pages,
which can produce an unneeded traffic and increase page load time for the whole site.
To avoid this, you can add such a script for the desired page only.</p>
<p>To add a page-specific script which will be put in the <code>&lt;head&gt;</code> section of the web page,
you use the @<code>HeadScript</code> view helper. Its methods are summarized by table 6.1:</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>appendFile()</code></td>
<td>Puts a link to external JS file after all others.</td>
</tr>
<tr>
<td><code>offsetSetFile()</code></td>
<td>Inserts a link to external JS file in a given list position.</td>
</tr>
<tr>
<td><code>prependFile()</code></td>
<td>Puts a link to external JS file before all others.</td>
</tr>
<tr>
<td><code>setFile()</code></td>
<td>Clears the list of scripts and puts the single external JS file in it.</td>
</tr>
<tr>
<td><code>appendScript()</code></td>
<td>Puts an inline script after all others.</td>
</tr>
<tr>
<td><code>offsetSetScript()</code></td>
<td>Inserts an inline script to a given list position.</td>
</tr>
<tr>
<td><code>prependScript()</code></td>
<td>Puts an inline script before all others.</td>
</tr>
<tr>
<td><code>setScript()</code></td>
<td>Clears the list of inline scripts and puts the single inline</td>
</tr>
<tr>
<td></td>
<td>script in it.</td>
</tr>
</tbody>
</table>
<p>Table 6.1</p>
<p>To add a link to external JS file to the <code>&lt;head&gt;</code> section, of a page, you add the following PHP
code in the beginning of your view template (<em>.phtml</em>) file:</p>
<pre><code class="language-php">&lt;?php
$this-&gt;headScript()-&gt;appendFile('/js/yourscript.js', 'text/javascript');
?&gt;
</code></pre>
<p>In the code above, we called the <code>appendFile()</code> method of the @<code>HeadScript</code> view helper.
This method takes two arguments. The first one is the path to external JS file (if the
file is stored inside of <em>APP_DIR/public/js</em> directory, or an URL of a JS file if the file
is located on another web server). The second argument is the type of the script
(it is typically equal to "text/javascript").</p>
<p>Other methods provided by @<code>HeadScript</code> view helper (such as <code>prependFile()</code>, <code>offsetSetFile()</code> and
<code>setFile()</code>) differentiate only in the position in the list of scripts into which the new script will
be inserted.</p>
<p>The methods <code>prependScript()</code>, <code>appendScript()</code>, <code>offsetSetScript()</code> and <code>setScript()</code>
are designed to insert an inline JavaScript code. They are rarely used, because
you typically insert external JS scripts in the head section of the document</p>
<p>To insert a script to the end of the <code>&lt;body&gt;</code> section of the document, you can use the
@<code>InlineScript</code> view helper <sup id="fnref:inlinescript"><a class="footnote-ref" href="#fn:inlinescript">7</a></sup>. It provides exactly the same methods as the
@<code>HeadScript</code> view helper. Below, an example is presented which can be used to append an
inline JavaScript code to the end of document body:</p>
<pre><code class="language-php">&lt;?php
$script = &lt;&lt;&lt;EOT
  $(document).ready(function() {
    alert('Hello World!');
  });
EOT;
$this-&gt;inlineScript()-&gt;appendScript($script);
</code></pre>
<p>In the example above, we used the PHP's Heredoc <sup id="fnref:heredoc"><a class="footnote-ref" href="#fn:heredoc">8</a></sup> syntax to fill in the <code>$script</code>
variable with the inline JavaScript code. Then we call the <code>appendScript()</code> function on
the @<code>InlineScript</code> view helper and pass the code as its argument.</p>
<p>But, using the @<code>InlineScript</code> view helper may be not very convenient in sense of readability.
Moreover, NetBeans IDE syntax checker will be stuck on the Heredoc notation
and will not recognize the JavaScript code. To fix this, you can simply put the <code>&lt;script&gt;</code>
element at the bottom of your view template, as shown in the example below:</p>
<pre><code class="language-php">&lt;!-- Page content goes first --&gt;

&lt;!-- Inline script goes last --&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  $(document).ready(function() {
    // Show a simple alert window with the &quot;Hello World!&quot; text.
    alert(&quot;Hello World!&quot;);
  });
&lt;/script&gt;
</code></pre>
<p>This ensures the same effect is achieved as with @<code>InlineScript</code> view helper, but allows for
better script readability and automatic syntax checking in NetBeans IDE.</p>
<blockquote>
<p>For @<code>HeadScript</code> and @<code>InlineScript</code> view helpers to work, you should ensure their content
is echoed in layout view template (look at lines 23 and 62 of <em>layout.phtml</em> file). If
you remove those lines from the layout template, the scripts won't be inserted in the
web page.</p>
</blockquote>
<h3 id="example">Example</h3>
<p>For a real-life example of inserting a JavaScript code in your web page, let's add a page
with auto-complete feature. With this feature, the web browser will predict
a word or phrase that the user wants to type in by several first letters,
without the user actually entering the text completely. We can use an auxiliary
JavaScript library called <em>Twitter Typeahead</em>.
Analogous to Twitter Bootstrap, the Typeahead library was developed in Twitter Inc. for
their internal purposes and is distributed freely.</p>
<p>Download <em>typeahead.min.js</em> file (a minified version of the Typeahead library)
from the official <a href="http://twitter.github.io/typeahead.js/">project page</a>. When the download is finished,
place the file in your <em>APP_DIR/public/js</em> directory.</p>
<p>Then add the <em>typeahead.phtml</em> file in your <em>application/index/static</em> subdirectory
under the module's <em>view</em> directory.
This directory is served by the <code>StaticRoute</code> route type that we've created and configured
earlier in chapter <a href="#routing">Routing</a>, and all "static" pages placed here will
automatically become available to site users.</p>
<p>In the <em>typeahead.phtml</em> view template file, put the following content:</p>
<pre><code class="language-php">&lt;?php
$this-&gt;headTitle('Typeahead');
// Add a JavaScript file
$this-&gt;headScript()-&gt;appendFile('/js/typeahead.min.js', 'text/javascript');
?&gt;

&lt;h1&gt;Typeahead&lt;/h1&gt;
&lt;p&gt;Type a continent name (e.g. Africa) in the text field below:&lt;/p&gt;
&lt;input type=&quot;text&quot; class=&quot;typeahead&quot; title=&quot;Type here&quot;/&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
  $(document).ready(function() {
    $('input.typeahead').typeahead({
       name: 'continents',
       local: [
            'Africa',
            'Antarctica',
            'Asia',
            'Europe',
            'South America',
            'North America'
        ]
    });
  });
&lt;/script&gt;
</code></pre>
<p>In the code above, we set the title for the page (line 2), then
we append the <em>typeahead.min.js</em> file to the <code>&lt;head&gt;</code> section of the
page with the @<code>HeadScript</code> view helper (line 4).</p>
<p>In line 9, we create a text input field where the user will be able to
enter some text. We mark the input field with the <code>typeahead</code> CSS class.</p>
<p>Lines 11-25 contain inline JavaScript code placed at the bottom of the
view template (we don't use @<code>InlineScript</code> view helper for better code
readability).</p>
<p>In line 12, we have the jQuery event handler bound to the "document is ready"
event. This event is fired when the complete DOM tree has been loaded.</p>
<p>In line 13, we have the jQuery selector ("input.typeahead") which selects
all input fields marked with the <code>typeahead</code> CSS class and execute the <code>typeahead()</code>
function on them.</p>
<p>The <code>typeahead()</code> function binds the change event handler to the text
input field. Once the user enters a character in the field, the handler is executed
and checks the letters entered. It then displays the dropdown menu with suggested
auto-completion variants.</p>
<p>The <code>typeahead()</code> function takes two arguments: the <code>name</code> argument identifies
the dataset, and the <code>local</code> argument is a JSON array containing the available
auto-completion variants.</p>
<p>To give the auto-completion field and its dropdown menu a nice-looking visual
appearance, add the following CSS rules to your <em>style.css</em> file.</p>
<pre><code class="language-css">.typeahead,
.tt-query,
.tt-hint {
  width: 396px;
  height: 30px;
  padding: 0px 12px;
  font-size: 1.1em;
  border: 2px solid #ccc;
  border-radius: 4px;
  outline: none;
}

.tt-dropdown-menu {
  width: 422px;
  margin-top: 12px;
  padding: 8px 0;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.tt-suggestion {
  padding: 3px 20px;
  font-size: 1.1em;
  line-height: 24px;
}

.tt-suggestion.tt-is-under-cursor {
  color: #fff;
  background-color: #0097cf;
}

.tt-suggestion p {
  margin: 0;
}
</code></pre>
<p>To see the auto-completion feature in work, type the
"http://localhost/typeahead" URL in your browser and press Enter.
The <em>Typeahead</em> page will appear with the prompt to enter a continent name.
For example, type <em>a</em> letter to see how Typeahead suggests you available
variants (figure 6.7).</p>
<p><img alt="Figure 6.7. Auto-complete feature" src="../images/appearance/typeahead.png" /></p>
<blockquote>
<p>You can see this example working in the <em>Hello World</em> sample bundled with this book
by typing the URL "http://localhost/typeahead" in your browser.</p>
</blockquote>
<h2 id="adding-css-stylesheets-to-a-web-page">Adding CSS Stylesheets to a Web Page</h2>
<p>CSS stylesheets are typically placed to the <code>&lt;head&gt;</code> section of an HTML document, either as a link to an
external file (external CSS stylesheet files are usually stored in <code>APP_DIR/public/css</code> directory.)</p>
<pre><code class="language-text">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/style.css&quot;&gt;
</code></pre>
<p>or as an inline <code>&lt;style&gt;</code> element</p>
<pre><code class="language-php">&lt;style&gt;
  body {
    padding-top: 60px;
    padding-bottom: 40px;
 }
&lt;/style&gt;
</code></pre>
<p>To store the CSS rules, external CSS stylesheets are recommended. For example, the base CSS rules provided
by Twitter Bootstrap CSS framework are loaded from <em>bootstrap.min.css</em> and <em>bootstrap-theme.min.css</em>
files. Custom site-specific CSS rules can be stored in <em>style.css</em> file. Since you need
this CSS stylesheets for most of your pages, it is better to link them in the head section of the
layout template. But, if a certain CSS stylesheet needs to be loaded for a single page only, you
place it on that page's view template.</p>
<p>To add an external CSS stylesheet to a view template, you use the @<code>HeadLink</code> view helper:</p>
<pre><code class="language-php">&lt;?php
$this-&gt;headLink()-&gt;appendStylesheet('/css/style.css');
$this-&gt;headLink()-&gt;appendStylesheet(
       '//code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css');
</code></pre>
<p>In the example code above, we used the <code>appendStylesheet()</code> method of the @<code>HeadLink</code> view helper to
add an external CSS stylesheet to the head section of the document. The method accepts
a path to local CSS file (line 2) or a URL to CSS file located on another server (line 3).</p>
<p>The summary of @<code>HeadLink</code> view helper's methods is provided in table 6.2.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>appendStylesheet()</code></td>
<td>Puts a link to CSS stylesheet file after all others.</td>
</tr>
<tr>
<td><code>offsetSetStylesheet()</code></td>
<td>Inserts a link to CSS stylesheet file in a given list position.</td>
</tr>
<tr>
<td><code>prependStylesheet()</code></td>
<td>Puts a link to external CSS stylesheet file before all others.</td>
</tr>
<tr>
<td><code>setStylesheet()</code></td>
<td>Clears the list and puts the single CSS file instead.</td>
</tr>
</tbody>
</table>
<p>Table 6.2</p>
<p>If you want to add an inline <code>&lt;style&gt;</code> element in the head section of the document, you can
use the @<code>HeadStyle</code> view helper. Its methods are presented in table 6.3 below:</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>appendStyle()</code></td>
<td>Adds a CSS stylesheet inline after all others.</td>
</tr>
<tr>
<td><code>offsetSetStyle()</code></td>
<td>Inserts a CSS stylesheet inline in a given list position.</td>
</tr>
<tr>
<td><code>prependStyle()</code></td>
<td>Puts a CSS stylesheet inline before all others.</td>
</tr>
<tr>
<td><code>setStyle()</code></td>
<td>Clears the list and puts the single CSS stylesheet inline instead.</td>
</tr>
</tbody>
</table>
<p>Table 6.3</p>
<h3 id="example_1">Example</h3>
<p>To demonstrate how to add a CSS stylesheet to your web page, we will take a real-life
example. Assume you need to let the user the ability to type a date (in YYYY-MM-DD format)
in a text input field. You would like to improve user experience by not just letting him
to type the date, but also by selecting it from a pop-up date-picker widget.</p>
<p>To achieve this goal, you can use a third-party library called jQuery UI <sup id="fnref:jqueryui"><a class="footnote-ref" href="#fn:jqueryui">9</a></sup>. To
integrate jQuery UI in your page, you need to download two files from the <a href="http://jqueryui.com/">official project page</a>:</p>
<ul>
<li>
<p><em>jquery-ui.min.js</em> -- the minified version of jQuery UI JavaScript code;</p>
</li>
<li>
<p><em>jquery-ui.min.css</em> -- the minified version of jQuery UI theming styles.</p>
</li>
</ul>
<p>Put the <em>jquery-ui.min.js</em> file to <em>APP_DIR/public/js</em>, and <em>jquery-ui.min.css</em> file to
<em>APP_DIR/public/css</em>. Finally, add the <em>datepicker.phtml</em> view template to the <em>application/index/static</em>
directory under the module's <em>view</em> directory:</p>
<pre><code class="language-php">&lt;?php
$this-&gt;headTitle('Datepicker');

$this-&gt;headScript()-&gt;appendFile('/js/jquery-ui.min.js', 'text/javascript');
$this-&gt;headLink()-&gt;appendStylesheet('/css/jquery-ui.min.css');
?&gt;

&lt;h1&gt;Datepicker&lt;/h1&gt;

&lt;p&gt;
    Click the edit box below to show the datepicker.
&lt;/p&gt;

&lt;input type=&quot;text&quot; class=&quot;datepicker&quot; title=&quot;Type here&quot;/&gt;

&lt;script&gt;
    $(document).ready(function() {
        $(&quot;input.datepicker&quot;).datepicker({ dateFormat: 'yy-mm-dd' });
    });
&lt;/script&gt;
</code></pre>
<p>In the example above, we use the @<code>HeadScript</code> view helper's <code>appendFile()</code>
method (line 4) to add the link to <em>jquery-ui.min.js</em> file to the head section of the document.</p>
<p>In line 5, we used the @<code>HeadLink</code> view helper's <code>appendStylesheet()</code>
method to add the link to <em>jquery-ui.min.css</em> CSS stylesheet to the head section of the document.</p>
<p>In line 14, we added the text input field which will be used to enter the date.</p>
<p>In line 16-20, we added an inline JavaScript code for binding jQuery event
handler to the text input field. When the user clicks the text input field,
the datepicker widget will appear allowing to select the date.</p>
<p>To see the result, enter the "http://localhost/datepicker" URL into your browser's
navigation bar (see figure 6.8 for example).</p>
<p><img alt="Figure 6.8. Datepicker" src="../images/appearance/datepicker.png" /></p>
<h2 id="writing-own-view-helpers">Writing Own View Helpers</h2>
<p>Earlier in this chapter, we've created the layout common to all pages of the web site.
But we still have a couple of things to do to make the layout fully functional.
If you remember, the layout template contains the navigation bar
and breadcrumbs. But both navigation bar and breadcrumbs interface components
provided by Twitter Bootstrap are currently "static", while they need to be
more interactive.</p>
<p>For example, the active item of the navigation bar should depend on
the controller's action that is being executed at the moment. And the breadcrumbs
should display the path to the currently viewed page. In this section we will make
these widgets completely ready for the website with the help of our own view helpers.</p>
<p>A typical view helper is a PHP class deriving from
@<code>Laminas\View\Helper\AbstractHelper</code> base class, which in turn implements the
@<code>Laminas\View\Helper\HelperInterface</code> interface (class inheritance diagram is presented in
figure 6.9).</p>
<p><img alt="Figure 6.9. View helper class diagram" src="../images/appearance/view_helper_inheritance.png" /></p>
<h3 id="menu">Menu</h3>
<p>First, let's implement the <code>Menu</code> view helper class that will render the HTML
code of the navigation bar. The <code>Menu</code> class will provide several methods allowing
to set menu items in a form of array, set the active menu item and render the menu
(see table 6.4 for method summary).</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($items)</code></td>
<td>Class constructor.</td>
</tr>
<tr>
<td><code>setItems($items)</code></td>
<td>Method for setting the menu items.</td>
</tr>
<tr>
<td><code>setActiveItemId($activeItemId)</code></td>
<td>Method for setting the currently active menu item.</td>
</tr>
<tr>
<td><code>render()</code></td>
<td>Renders the menu.</td>
</tr>
<tr>
<td><code>renderItem($item)</code></td>
<td>Renders a single menu item.</td>
</tr>
</tbody>
</table>
<p>Table 6.4</p>
<p>The information describing a single menu item will be represented by
an array like below (for example, the <em>Home</em> item will have an ID, text
label and an URL for a hyperlink):</p>
<pre><code class="language-php">[
  'id' =&gt; 'home',
  'label' =&gt; 'Home',
  'link' =&gt; $this-&gt;url('home')
]
</code></pre>
<p>We also want to add the support for dropdown menus as navigation items. For example,
in case of the <em>Support</em> dropdown menu having the <em>Documentation</em> and <em>Help</em> sub-items,
the item description will take the following form:</p>
<pre><code class="language-php">[
  'id' =&gt; 'support',
  'label' =&gt; 'Support',
  'dropdown' =&gt; [
    [
      'id' =&gt; 'documentation',
      'label' =&gt; 'Documentation',
      'link' =&gt; $this-&gt;url('doc', ['page'=&gt;'contents'])
    ],
    [
      'id' =&gt; 'help',
      'label' =&gt; 'Help',
      'link' =&gt; $this-&gt;url('static', ['page'=&gt;'help'])
    ]
  ]
]
</code></pre>
<p>We want to put the <code>Menu</code> class in <code>Application\View\Helper</code> namespace. Thus, start
from creating the <code>Menu.php</code> file in the <em>View/Helper</em> directory under the <em>Application</em>
module's source directory (figure 6.10).</p>
<p><img alt="Figure 6.10. View helper directory" src="../images/appearance/view_helper_dir.png" /></p>
<blockquote>
<p><strong>Why do we place the view helper class under module's source directory?</strong></p>
<p>View helpers (unlike <code>.phtml</code> view templates) are stored under module's <code>src/</code> directory,
because they are usual PHP classes and require to be resolved by a PHP
class auto-loading feature. On the other hand, view templates are resolved by the special Laminas class
called <em>view resolver</em>, and for this reason, view templates are stored under
the module's <code>view/</code> directory.</p>
</blockquote>
<p>Next, create the stub code for the <code>Menu</code> class:</p>
<pre><code class="language-php">&lt;?php
namespace Application\View\Helper;

use Laminas\View\Helper\AbstractHelper;

// This view helper class displays a menu bar.
class Menu extends AbstractHelper
{
  // Menu items array.
  protected $items = [];

  // Active item's ID.
  protected $activeItemId = '';

  // Constructor.
  public function __construct($items=[])
  {
    $this-&gt;items = $items;
  }

  // Sets menu items.
  public function setItems($items)
  {
    $this-&gt;items = $items;
  }

  // Sets ID of the active items.
  public function setActiveItemId($activeItemId)
  {
    $this-&gt;activeItemId = $activeItemId;
  }
}
</code></pre>
<p>In the code above, we defined several private fields for the <code>Menu</code>
class. The <code>$items</code> field (line 10) is an array which will store the information
on the menu items; and the <code>$activeItemId</code> field (line 13) is the ID of an active
menu item. The active menu item will be visually highlighted.</p>
<p>In lines 16-19, we defined the class constructor method, which (optionally)
takes the array of items for initializing the menu. An alternative method of
menu initialization is through the <code>setItems()</code> method (lines 22-25). And the <code>setActiveItemId()</code>
method (lines 28-31) sets the ID of the currently active menu item.</p>
<p>Next, let's add the <code>render()</code> method, which will generate HTML code for
the whole navigation bar and return it as a text string:</p>
<pre><code class="language-php">// Renders the menu.
public function render()
{
  if (count($this-&gt;items)==0)
    return ''; // Do nothing if there are no items.

  $result = '&lt;nav class=&quot;navbar navbar-default&quot; role=&quot;navigation&quot;&gt;';
  $result .= '&lt;div class=&quot;navbar-header&quot;&gt;';
  $result .= '&lt;button type=&quot;button&quot; class=&quot;navbar-toggle&quot; ';
  $result .= 'data-toggle=&quot;collapse&quot; data-target=&quot;.navbar-ex1-collapse&quot;&gt;';
  $result .= '&lt;span class=&quot;sr-only&quot;&gt;Toggle navigation&lt;/span&gt;';
  $result .= '&lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;';
  $result .= '&lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;';
  $result .= '&lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;';
  $result .= '&lt;/button&gt;';
  $result .= '&lt;/div&gt;';

  $result .= '&lt;div class=&quot;collapse navbar-collapse navbar-ex1-collapse&quot;&gt;';
  $result .= '&lt;ul class=&quot;nav navbar-nav&quot;&gt;';

  // Render items
  foreach ($this-&gt;items as $item) {
    $result .= $this-&gt;renderItem($item);
  }

  $result .= '&lt;/ul&gt;';
  $result .= '&lt;/div&gt;';
  $result .= '&lt;/nav&gt;';

  return $result;
}
</code></pre>
<p>In the code above, we produce the HTML markup for the Bootstrap navbar component.
The navbar will use the default theme and will be collapsible (adaptive to
different screen widths). The navbar will not have the brand text in the header.
In lines 22-24, we loop through the menu items and render each one with the <code>renderItem()</code>
method. Finally, the <code>render()</code> method returns the resulting HTML code as a text string.</p>
<p>To finish with creating the <code>Menu</code> class, let's implement the <code>renderItem()</code>
method. This method will produce the HTML code for a single menu item:</p>
<pre><code class="language-php">// Renders an item.
protected function renderItem($item)
{
  $id = isset($item['id']) ? $item['id'] : '';
  $isActive = ($id==$this-&gt;activeItemId);
  $label = isset($item['label']) ? $item['label'] : '';

  $result = '';

  if(isset($item['dropdown'])) {

    $dropdownItems = $item['dropdown'];

    $result .= '&lt;li class=&quot;dropdown ' . ($isActive?'active':'') . '&quot;&gt;';
    $result .= '&lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;';
    $result .= $label . ' &lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;';
    $result .= '&lt;/a&gt;';

    $result .= '&lt;ul class=&quot;dropdown-menu&quot;&gt;';

    foreach ($dropdownItems as $item) {
      $link = isset($item['link']) ? $item['link'] : '#';
      $label = isset($item['label']) ? $item['label'] : '';

      $result .= '&lt;li&gt;';
      $result .= '&lt;a href=&quot;'.$link.'&quot;&gt;'.$label.'&lt;/a&gt;';
      $result .= '&lt;/li&gt;';
    }

    $result .= '&lt;/ul&gt;';
    $result .= '&lt;/a&gt;';
    $result .= '&lt;/li&gt;';

  } else {
    $link = isset($item['link']) ? $item['link'] : '#';

    $result .= $isActive?'&lt;li class=&quot;active&quot;&gt;':'&lt;li&gt;';
    $result .= '&lt;a href=&quot;'.$link.'&quot;&gt;'.$label.'&lt;/a&gt;';
    $result .= '&lt;/li&gt;';
  }

  return $result;
}
</code></pre>
<p>In the <code>renderItem()</code> method's code above we did the following.
First, we checked whether the item is a dropdown menu or a simple
item (line 10). If the item is a dropdown menu, we walk through the dropdown
menu items, and render each one in turn (lines 21-28). Lines 35-39 contain the
rendering code for the case of a simple item.</p>
<p>To be able to use the <code>Menu</code> view helper in a view template, it is required
to register it in configuration. To do that, add the following <code>view_helpers</code>
key in the <em>module.config.php</em> file:</p>
<pre><code class="language-php">&lt;?php
return [

    // ...

    // The following registers our custom view
    // helper classes in view plugin manager.
    'view_helpers' =&gt; [
        'factories' =&gt; [
            View\Helper\Menu::class =&gt; InvokableFactory::class,
        ],
       'aliases' =&gt; [
            'mainMenu' =&gt; View\Helper\Menu::class
       ]
    ],
];
</code></pre>
<p>In the example above, we registered our <code>Menu</code> class as a <code>mainMenu</code>
view helper and will be able to access it from any view template.</p>
<p>Since we plan to use the <code>Menu</code> view helper in the layout view template,
replace the navigation menu markup in <em>layout.phtml</em> file with the following code:</p>
<pre><code class="language-php">&lt;!-- Navigation bar --&gt;
&lt;?php
  $this-&gt;mainMenu()-&gt;setItems([
    [
      'id' =&gt; 'home',
      'label' =&gt; 'Home',
      'link' =&gt; $this-&gt;url('home')
    ],
    [
      'id' =&gt; 'downloads',
      'label' =&gt; 'Downloads',
      'link' =&gt; $this-&gt;url(&quot;application&quot;, ['action'=&gt;'downloads'])
    ],
    [
      'id' =&gt; 'support',
      'label' =&gt; 'Support',
      'dropdown' =&gt; [
        [
          'id' =&gt; 'documentation',
          'label' =&gt; 'Documentation',
          'link' =&gt; $this-&gt;url('doc', ['page'=&gt;'contents'])
        ],
        [
          'id' =&gt; 'help',
          'label' =&gt; 'Help',
          'link' =&gt; $this-&gt;url('static', ['page'=&gt;'help'])
        ]
      ]
    ],
    [
      'id' =&gt; 'about',
      'label' =&gt; 'About',
      'link' =&gt; $this-&gt;url('about')
    ],
  ]);

  echo $this-&gt;mainMenu()-&gt;render();
?&gt;
</code></pre>
<p>In the code above, we access the registered <code>mainMenu</code> view helper and set
the navigation bar items with the help of <code>setItems()</code> method (line 3).
As a parameter for the method, we pass the array of items.
Then we render the navigation bar with the <code>render()</code> method.</p>
<p>To set the active item for the navigation bar, we can call the <code>setActiveItemId()</code>
method from any view template. For example, add the following code to the beginning of
the view template for the <em>About</em> page (<em>application/index/about.phtml</em>) as follows:</p>
<pre><code class="language-php">&lt;?php
$this-&gt;mainMenu()-&gt;setActiveItemId('about');
?&gt;
</code></pre>
<p>Now, if you open the <em>About</em> page in your browser, you should see that the <em>About</em> item
of the navigation menu is highlighted with a different color. To display the active item
properly, you need to call the <code>setActiveItemId()</code> method for each page presenting in the
navbar (<em>Home</em>, <em>Downloads</em>, <em>Documentation</em>, etc.) You can see how this is done in the
<em>Hello World</em> sample.</p>
<h3 id="breadcrumbs">Breadcrumbs</h3>
<p>Now that you know how to implement a view helper, let's create the second view
helper for rendering the breadcrumbs. It is completely analogous to the <code>Menu</code>
view helper, so below we just provide the complete code of the <code>Breadcrumbs</code> class:</p>
<pre><code class="language-php">&lt;?php
namespace Application\View\Helper;

use Laminas\View\Helper\AbstractHelper;

// This view helper class displays breadcrumbs.
class Breadcrumbs extends AbstractHelper
{
  // Array of items.
  private $items = [];

  // Constructor.
  public function __construct($items=[])
  {
    $this-&gt;items = $items;
  }

  // Sets the items.
  public function setItems($items)
  {
    $this-&gt;items = $items;
  }

  // Renders the breadcrumbs.
  public function render()
  {
    if(count($this-&gt;items)==0)
      return ''; // Do nothing if there are no items.

    // Resulting HTML code will be stored in this var
    $result = '&lt;ol class=&quot;breadcrumb&quot;&gt;';

    // Get item count
    $itemCount = count($this-&gt;items);

    $itemNum = 1; // item counter

    // Walk through items
    foreach ($this-&gt;items as $label=&gt;$link) {

      // Make the last item inactive
      $isActive = ($itemNum==$itemCount?true:false);

      // Render current item
      $result .= $this-&gt;renderItem($label, $link, $isActive);

      // Increment item counter
      $itemNum++;
    }

    $result .= '&lt;/ol&gt;';

    return $result;
  }

  // Renders an item.
  protected function renderItem($label, $link, $isActive)
  {
   $result = $isActive?'&lt;li class=&quot;active&quot;&gt;':'&lt;li&gt;';

    if(!$isActive)
      $result .= '&lt;a href=&quot;'.$link.'&quot;&gt;'.$label.'&lt;/a&gt;';
    else
      $result .= $label;

    $result .= '&lt;/li&gt;';

    return $result;
  }
}
</code></pre>
<p>To be able to use the <code>Breadcrumbs</code> view helper, register it in the <em>module.config.php</em> file
as follows:</p>
<pre><code class="language-php">&lt;?php
return [

  //...

  // The following registers our custom view helper classes.
  'view_helpers' =&gt; [
    'factories' =&gt; [
      View\Helper\Breadcrumbs::class =&gt; InvokableFactory::class,
    ],
    'aliases' =&gt; [
        'pageBreadcrumbs' =&gt; View\Helper\Breadcrumbs::class,
    ]
  ],
];
</code></pre>
<p>Since we plan to use the <code>Breadcrumbs</code> view helper in the layout view template,
replace the breadcrumbs markup in <em>layout.phtml</em> file with the following code:</p>
<pre><code class="language-php">&lt;!-- Breadcrumbs --&gt;
&lt;?= $this-&gt;pageBreadcrumbs()-&gt;render(); ?&gt;
</code></pre>
<p>In the code above, we access the <code>pageBreadcrumbs()</code> view helper
and call it with the <code>render()</code> method. The <code>echo</code> operator then outputs
the HTML code of the breadcrumbs.</p>
<p>Finally, you need to pass the breadcrumbs items for each view template.
For example, add the following lines in the view template for the <em>About</em> page:</p>
<pre><code class="language-php">&lt;?php
$this-&gt;pageBreadcrumbs()-&gt;setItems([
            'Home'=&gt;$this-&gt;url('home'),
            'About'=&gt;$this-&gt;url('about'),
            ]);
?&gt;
</code></pre>
<p>Now, if you open the about page, you should see breadcrumbs as in figure 6.11 below.
Site users will easily see what page they are visiting right now and will not get lost.</p>
<p><img alt="Figure 6.11. Breadcrumbs for the About page" src="../images/appearance/about_breadcrumbs.png" /></p>
<h2 id="view-models-and-page-composition">View Models and Page Composition</h2>
<p>Earlier, when we wrote action methods for the controller classes, we used the @<code>ViewModel</code>[Laminas\View\Model\ViewModel]
class as a variable container for passing the variables from controller to view template,
and we also used the @<code>ViewModel</code>[Laminas\View\Model\ViewModel] for overriding the default view template name.</p>
<p>But, actually the @<code>ViewModel</code>[Laminas\View\Model\ViewModel] class is more than just a variable container plus view
template name. In fact, it is closely related to the layout and page composition.</p>
<p>The third big capability of the view model class is that it allows for <em>combining</em> several
view models in a tree-like structure. Each view model in the tree has the associated
view template name and data variables that can be passed to the view template to control
the process of rendering.</p>
<p>This feature is internally used by Laminas Framework when "combining" the layout view template and
the view template associated with the controller's action method. Laminas internally creates the
view model for the layout template and assigns it with <code>layout/layout</code> view template name. When
your controller's action method returns the @<code>ViewModel</code>[Laminas\View\Model\ViewModel] object, this object is attached
as a child to the layout view model (see figure 6.12 for an example).</p>
<p><img alt="Figure 6.12. View models nested in a tree-like structure" src="../images/appearance/viewmodel_tree.png" /></p>
<p>The resulting process of page rendering is the following:</p>
<ul>
<li>The child view model is visited first and its associated view template is rendered,
  and the resulting HTML markup is saved in a temporary storage;</li>
<li>The output HTML markup of the child view model is passed to the layout view
  model as the <code>$content</code> variable. This way the layout view template can render
  the content specific to the certain page.</li>
</ul>
<p>Table 6.5 gives the summary of the methods provided by the @<code>ViewModel</code>[Laminas\View\Model\ViewModel] class for the purpose
of page composition:</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>addChild()</code></td>
<td>Adds a child view model.</td>
</tr>
<tr>
<td><code>getChildren()</code></td>
<td>Gets the list of child view models.</td>
</tr>
<tr>
<td><code>hasChildren()</code></td>
<td>Tests if the view model has children or not.</td>
</tr>
<tr>
<td><code>clearChildren()</code></td>
<td>Removes all child view models.</td>
</tr>
<tr>
<td><code>count()</code></td>
<td>Returns count of child view models.</td>
</tr>
<tr>
<td><code>getIterator()</code></td>
<td>Returns the iterator for child view models.</td>
</tr>
<tr>
<td><code>setTerminal()</code></td>
<td>Sets the terminal flag.</td>
</tr>
<tr>
<td><code>terminate()</code></td>
<td>Tests whether the view model is terminal.</td>
</tr>
<tr>
<td><code>setCaptureTo()</code></td>
<td>Sets the name of the variable for capturing the output.</td>
</tr>
<tr>
<td><code>setAppend()</code></td>
<td>Sets the append flag.</td>
</tr>
<tr>
<td><code>isAppend()</code></td>
<td>Tests whether to append this view model to another one.</td>
</tr>
</tbody>
</table>
<p>Table 6.5. Methods of the ViewModel class for page composition</p>
<p>Below, we provide the brief description of the methods presented in the table above.</p>
<p>The <code>addChild()</code>, <code>getChild()</code>, <code>hasChildren()</code> and <code>clearChildren()</code> methods are used for
(respectively) adding a child view model to the parent one, retrieving the array of view models
attached, testing if the view model is leaf (doesn't have children) and detaching all children.</p>
<p>The <code>setCaptureTo()</code> method allows to set the variable in the parent view template
into which to inject the HTML markup code produced by a child view template. If two child
view models use the same variable, the second one will overwrite the first one.
The <code>setAppend()</code> method can be used when you need to inject the results of two or more
view templates into a single placeholder variable. The next rendered view template will
be appended to the variable's existing content. The view model returned by the controller
is assigned the <code>$content</code> capture variable.</p>
<p>A view model can be marked as <em>terminal</em> with the <code>setTerminal()</code> method. The <code>setTerminal()</code> method
takes a single flag parameter. If <code>true</code>, the view model is considered as terminal (top-level parent)
and the renderer returns the output of the view template to the application, otherwise
its parents are rendered as well. The method <code>terminate()</code> tests whether the view model is terminal
or not.</p>
<blockquote>
<p>The <code>setTerminal()</code> method is very useful in some situations, because with its help you
can disable the rendering of the layout view template. If you return from controller the
view model marked as terminal, the layout will not be applied. This can be used, for example,
when you want to load part of a page asynchronously by an AJAX <sup id="fnref:ajax"><a class="footnote-ref" href="#fn:ajax">10</a></sup> request and need to insert
its HTML code in the DOM tree of an existing page.</p>
</blockquote>
<h2 id="summary">Summary</h2>
<p>Laminas Framework is shipped with Twitter Bootstrap that is a CSS framework
allowing for creating visual appealing and professionally looking web
applications. It provides the base CSS rules, the simple layout grid, and
useful interface components (like navigation bars, breadcrumbs, pagination,
etc.)</p>
<p>In a typical web site, pages have common structure (for example, a typical page
may have a navigation bar at the top, the body with page content, and the footer
with the copyright information at the bottom). In Laminas Framework, you define
this common structure with a view template file called the layout. The layout
template may have placeholder(s) in which Laminas puts the content specific to a
particular web page.</p>
<p>View helpers are (relatively) simple PHP classes that encapsulate a part of page
rendering work. For example, they allow for composing the page of several parts,
setting page title and meta tags, and creating the reusable widgets like navigation
bar or breadcrumbs.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:css">
<p>If you are new to CSS, please refer to the excellent W3Schools CSS tutorial
    by visiting <a href="http://www.w3schools.com/">this link</a>.&#160;<a class="footnote-backref" href="#fnref:css" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:doctype">
<p>The <code>&lt;!DOCTYPE&gt;</code> declaration goes first in the HTML document,
        before the <code>&lt;html&gt;</code> tag. The declaration provides an instruction to the web
        browser about what version of HTML the page is written in (in our web site, we use
        HTML5-conformant document type declaration).&#160;<a class="footnote-backref" href="#fnref:doctype" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:utf8">
<p>The UTF-8 allows to encode any character in any alphabet around the
     world, that's why it is recommended for encoding the web pages.&#160;<a class="footnote-backref" href="#fnref:utf8" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:compound">
<p>A "compound" page title consists of two parts: the first part ("ZF Skeleton Application")
         is defined by the layout, and the second part - defined by a particular page - is
         prepended to the first one. For example, for the <em>About</em> page of your site you will have
         the "About - ZF Skeleton Application", and for the <em>Documentation</em> page you will have
         something like "Documentation - ZF Skeleton Application".&#160;<a class="footnote-backref" href="#fnref:compound" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:store">
<p>The @<code>Placeholder</code>[Laminas\View\Helper\Placeholder] view helper stores the data in PHP session storage. So,
      in theory, you can even capture content on one page and then render/use it on another one.&#160;<a class="footnote-backref" href="#fnref:store" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:dom">
<p>The DOM (Document Object Model) is a convenient representation of an HTML document
    structure as a tree of elements.&#160;<a class="footnote-backref" href="#fnref:dom" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:inlinescript">
<p>The name @<code>InlineScript</code> does not fully reflect the capabilities of this view helper.
             Actually, it can insert both inline and external scripts. The better name for this
             view helper would be <code>BodyScript</code>, because it is intended for inserting scripts in
             document body.&#160;<a class="footnote-backref" href="#fnref:inlinescript" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:heredoc">
<p>Heredoc is an alternative string definition method provided by PHP.
        It works well with multi-line strings.&#160;<a class="footnote-backref" href="#fnref:heredoc" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:jqueryui">
<p>jQuery UI provides a set of "user interface interactions, effects, widgets,
         and themes"; it is based on jQuery library. jQuery UI is analogous to Twitter
         Bootstrap in the sense that both provide reusable user interface components.&#160;<a class="footnote-backref" href="#fnref:jqueryui" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
<li id="fn:ajax">
<p>AJAX (stands for Asynchronous JavaScript and XML) is a capability provided by modern browsers
     which can be used to send data to, and retrieve data from, a server asynchronously
     (in background) without interfering with the display and behavior of the existing page.&#160;<a class="footnote-backref" href="#fnref:ajax" title="Jump back to footnote 10 in the text">&#8617;</a></p>
</li>
</ol>
</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../routing/" class="btn btn-neutral float-left" title="Routing"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../forms/" class="btn btn-neutral float-right" title="Collecting User Input with Forms">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/modir/laminas-book" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../routing/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../forms/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
