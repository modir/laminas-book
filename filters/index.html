<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://modir.github.io/filters/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Transforming Input Data with Filters - Using Laminas Framework</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Transforming Input Data with Filters";
        var mkdocs_page_input_path = "filters.md";
        var mkdocs_page_url = "/filters/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Using Laminas Framework
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Preface</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../intro/">None</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../acknowledgments/">Acknowledgments</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../intro/">Introduction to Laminas Framework</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../skeleton/">Laminas Skeleton Application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../operation/">Website Operation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mvc/">Model-View-Controller</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../routing/">Routing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../appearance/">Page Appearance and Layout</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../forms/">Collecting User Input with Forms</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Transforming Input Data with Filters</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#about-filters">About Filters</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#filterinterface">FilterInterface</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#standard-filters-overview">Standard Filters Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#instantiating-a-filter">Instantiating a Filter</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#method-1-instantiating-a-filter-manually">Method 1: Instantiating a Filter Manually</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#method-2-constructing-a-filter-with-staticfilter">Method 2: Constructing a Filter with StaticFilter</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#method-3-constructing-a-filter-from-array">Method 3: Constructing a Filter From Array</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#about-filter-plugin-manager">About Filter Plugin Manager</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#filters-behavior-in-case-of-incorrect-input-data">Filter's Behavior in Case of Incorrect Input Data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#filter-usage-examples">Filter Usage Examples</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#filters-casting-input-data-to-a-specified-type">Filters Casting Input Data to a Specified Type</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#toint-filter">ToInt Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#boolean-filter">Boolean Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#tonull-filter">ToNull Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#datetimeformatter-filter">DateTimeFormatter Filter</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#filters-performing-manipulations-on-a-file-path">Filters Performing Manipulations on a File Path</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#basename-filter">BaseName Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#dir-filter">Dir Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#realpath-filter">RealPath Filter</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#filters-performing-compression-and-encryption-of-input-data">Filters Performing Compression and Encryption of Input Data</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#compress-filter">Compress Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#encrypt-filter">Encrypt Filter</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#filters-manipulating-string-data">Filters Manipulating String Data</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#stringtolower-filter">StringToLower Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pregreplace-filter">PregReplace Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#striptags-filter">StripTags Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#stripnewlines-filter">StripNewlines Filter</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#urinormalize-filter">UriNormalize Filter</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#organizing-filters-in-a-chain">Organizing Filters in a Chain</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#custom-filtering-with-the-callback-filter">Custom Filtering with the Callback Filter</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#example">Example</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#writing-your-own-filter">Writing Your Own Filter</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#using-the-phonefilter-class">Using the PhoneFilter Class</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../validators/">Checking Input Data with Validators</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../uploads/">Uploading Files with Forms</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../forms_advanced/">Advanced Usage of Forms</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../doctrine/">Database Management with Doctrine ORM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../doctrine_migrations/">Database Migrations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../modules/">Creating a New Module</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../session/">Working with Sessions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../users/">User Management, Authentication and Access Filtering</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../roles/">Role-Based Access Control</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../devenv/">Appendix A. Configuring Web Development Environment</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../netbeans/">Appendix B. Introduction to PHP Development in NetBeans IDE</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../bootstrap/">Appendix C. Introduction to Twitter Bootstrap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../doctrine_intro/">Appendix D. Introduction to Doctrine</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ec2_tutorial/">Appendix E. Installing a Laminas Web Application to Amazon EC2</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Using Laminas Framework</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Transforming Input Data with Filters</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/modir/laminas-book/edit/master/docs/filters.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="transforming-input-data-with-filters">Transforming Input Data with Filters</h1>
<p>In this chapter, we will provide an overview of standard filters that
can be used with your web forms. A filter is a class which takes some input data, processes it,
and produces some output data. We will also show how to write a custom filter.</p>
<blockquote>
<p>In general, you can even use filters <em>outside</em> forms to process an arbitrary data.
For example, filters may be used in a controller action to transform the data passed
as GET and/or POST variables to certain format.</p>
</blockquote>
<p>Laminas components covered in this chapter:</p>
<table>
<thead>
<tr>
<th><em>Component</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>@<code>Laminas\Filter</code></td>
<td>Contains various filters classes.</td>
</tr>
<tr>
<td>@<code>Laminas\InputFilter</code></td>
<td>Implements a container for filters/validators.</td>
</tr>
</tbody>
</table>
<h2 id="about-filters">About Filters</h2>
<p>Filters are designed to take some input data, process it, and produce some output data.
Laminas Framework provides a lot of standard filters that can be used for creating filtering
rules of your forms (or, if you wish, to filter an arbitrary data outside of forms).</p>
<h3 id="filterinterface">FilterInterface</h3>
<p>Technically, a <em>filter</em> is a PHP class implementing the @<code>FilterInterface</code>[Laminas\Filter\FilterInterface] interface
(it belongs to @<code>Laminas\Filter</code> namespace). The interface definition is presented below:</p>
<pre><code class="language-php">&lt;?php
namespace Laminas\Filter;

interface FilterInterface
{
    // Returns the result of filtering $value.
    public function filter($value);
}
</code></pre>
<p>As you can see, the @<code>FilterInterface</code>[Laminas\Filter\FilterInterface] interface has the single method <code>filter()</code> (line 7),
which takes the single parameter <code>$value</code>. The method transforms the input data and finally
returns the resulting (filtered) value.</p>
<blockquote>
<p>A concrete filter class implementing the @<code>FilterInterface</code>[Laminas\Filter\FilterInterface] interface may have additional methods.
For example, many filter classes have methods allowing configuration of the filter (set filtering options).</p>
</blockquote>
<h2 id="standard-filters-overview">Standard Filters Overview</h2>
<p>Standard filters implementing the @<code>FilterInterface</code>[Laminas\Filter\FilterInterface] interface belong to @<code>Laminas\Filter</code> namespace <sup id="fnref:standard_filters"><a class="footnote-ref" href="#fn:standard_filters">1</a></sup>.
A filter class inheritance diagram is shown in figure 8.1. From that figure, you can see that base
concrete class for most standard filters is the @<code>AbstractFilter</code> class, which implements
the @<code>FilterInterface</code>[Laminas\Filter\FilterInterface] interface <sup id="fnref:filter_inheritance"><a class="footnote-ref" href="#fn:filter_inheritance">2</a></sup>.</p>
<p><img alt="Figure 8.1. Filter class inheritance" src="../images/filters/filter_inheritance.png" /></p>
<blockquote>
<p>You may notice that there is a strange filter called @<code>StaticFilter</code> which does not inherit from @<code>AbstractFilter</code>
base class. This is because the @<code>StaticFilter</code> class is actually a "wrapper" (it is designed to be a proxy
to another filter without explicit instantiation of that filter).</p>
</blockquote>
<p>Standard filters provided by the @<code>Laminas\Filter</code> component, along with a brief description of each, are listed in table 8.1.</p>
<p>As you can see from the table, the standard filters can be roughly divided into the following groups:</p>
<ul>
<li>filters casting input data to a specified type (integer, boolean, date-time, etc.);</li>
<li>filters performing manipulations on a file path (getting the base name, parent directory name, etc.);</li>
<li>filters performing compression and encryption of input data;</li>
<li>filters manipulating string data (case conversion, trimming, character replacement and removal, URL normalizing, etc.); and</li>
<li>proxy filters wrapping other filters (@<code>Callback</code>[Laminas\Filter\Callback], @<code>FilterChain</code>[Laminas\Filter\FilterChain] and @<code>StaticFilter</code>).</li>
</ul>
<table>
<thead>
<tr>
<th><em>Class name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>@<code>Boolean</code>[Laminas\Filter\Boolean]</td>
<td>Returns a boolean representation of <code>$value</code>.</td>
</tr>
<tr>
<td>@<code>ToInt</code></td>
<td>Casts the input <code>$value</code> to <code>int</code>.</td>
</tr>
<tr>
<td>@<code>Digits</code>[Laminas\Filter\Digits]</td>
<td>Returns the string <code>$value</code>, removing all but digit characters.</td>
</tr>
<tr>
<td>@<code>ToNull</code></td>
<td>Returns <code>null</code> if the input value can be treated as null; otherwise returns the <code>$value</code> itself.</td>
</tr>
<tr>
<td>@<code>DateTimeFormatter</code></td>
<td>Takes a date &amp; time string in an arbitrary format and produces a date &amp; time string in a given format.</td>
</tr>
<tr>
<td>@<code>BaseName</code></td>
<td>Given a string containing the path to a file or directory, this filter will return the trailing name component.</td>
</tr>
<tr>
<td>@<code>Dir</code></td>
<td>Given a string containing the path of a file or directory, this filter will return the parent directory's path.</td>
</tr>
<tr>
<td>@<code>RealPath</code></td>
<td>Returns canonicalized absolute pathname.</td>
</tr>
<tr>
<td>@<code>Compress</code></td>
<td>Compresses the input data with the specified algorithm (GZ by default).</td>
</tr>
<tr>
<td>@<code>Decompress</code></td>
<td>Decompresses the input data with the specified algorithm (the effect is inverse to the <code>Compress</code> filter).</td>
</tr>
<tr>
<td>@<code>Encrypt</code>[Laminas\Filter\Encrypt]</td>
<td>Encrypts the input data with the specified cryptographic algorithm.</td>
</tr>
<tr>
<td>@<code>Decrypt</code>[Laminas\Filter\Decrypt]</td>
<td>Decrypts the input data previously encrypted with the specified cryptographic algorithm.</td>
</tr>
<tr>
<td>@<code>Inflector</code></td>
<td>Performs the modification of a word to express different grammatical categories such as tense, mood, voice, aspect, person, number, gender, and case.</td>
</tr>
<tr>
<td>@<code>PregReplace</code></td>
<td>Performs a regular expression search and replace.</td>
</tr>
<tr>
<td>@<code>StringToLower</code></td>
<td>Converts the string to lowercase letters.</td>
</tr>
<tr>
<td>@<code>StringToUpper</code></td>
<td>Converts the string to uppercase letters.</td>
</tr>
<tr>
<td>@<code>StringTrim</code></td>
<td>Removes white spaces (space, tabs, etc.) from the beginning and the end of the string.</td>
</tr>
<tr>
<td>@<code>StripNewlines</code></td>
<td>Removes new line characters from string (ASCII codes #13, #10).</td>
</tr>
<tr>
<td>@<code>HtmlEntities</code></td>
<td>Returns the string, converting characters to their</td>
</tr>
<tr>
<td></td>
<td>corresponding HTML entity equivalents where they exist.</td>
</tr>
<tr>
<td>@<code>StripTags</code></td>
<td>Removes tags (e.g., <code>&lt;a&gt;&lt;/a&gt;</code>) and comments (e.g., <code>&lt;!-- --&gt;</code>).</td>
</tr>
<tr>
<td>@<code>UriNormalize</code></td>
<td>Converts a URL string to the "normalized" form and prepends the schema part (e.g., converts <em>www.example.com</em> to <em>http://www.example.com</em>).</td>
</tr>
<tr>
<td>@<code>Callback</code>[Laminas\Filter\Callback]</td>
<td>Allows to use a callback function as a filter.</td>
</tr>
<tr>
<td>@<code>FilterChain</code>[Laminas\Filter\FilterChain]</td>
<td>Allows to organize several filters in a chain.</td>
</tr>
<tr>
<td>@<code>StaticFilter</code></td>
<td>Returns a value filtered through a specified filter class</td>
</tr>
<tr>
<td></td>
<td>without requiring separate instantiation of the filter object.</td>
</tr>
</tbody>
</table>
<p>Table 8.1. Standard filters</p>
<h2 id="instantiating-a-filter">Instantiating a Filter</h2>
<p>In Laminas Framework, you can use several methods of creating a filter:</p>
<ul>
<li>instantiating it manually (with the <code>new</code> operator);</li>
<li>creating it with a factory class (by passing an array configuration),
   a method most frequently used when adding filtering and validation rules in a form; and</li>
<li>instantiating it implicitly with the @<code>StaticFilter</code> wrapper class.</li>
</ul>
<p>Next, we will cover these three methods in more details.</p>
<h3 id="method-1-instantiating-a-filter-manually">Method 1: Instantiating a Filter Manually</h3>
<p>As we previously said, a filter in general can be used not only with forms but also for filtering
an arbitrary data. To do that, you simply create an instance of the filter class, configure the
filter by using the methods it provides, and call the <code>filter()</code> method on the filter.</p>
<p>For example, let's consider the usage of the @<code>StringTrim</code> filter which removes the
white space characters from the beginning and the end of a string.</p>
<blockquote>
<p>The @<code>StringTrim</code> filter is useful for filtering user-entered string data (E-mail addresses, user
names, etc.) because site visitors tend to make typos in those data. For example, a user may
unintentionally enter a trailing space in an E-mail field, thus making an E-mail invalid. With
the @<code>StringTrim</code> filter, you will easily cope with such input errors and improve user experience.</p>
</blockquote>
<p>The methods provided by the filter are listed in table 8.2:</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($charlistOrOptions)</code></td>
<td>Constructs the filter. Accepts the list of options.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Removes the predefined characters from the beginning and the end of the string.</td>
</tr>
<tr>
<td><code>setCharList($charList)</code></td>
<td>Defines the list of characters to strip off.</td>
</tr>
<tr>
<td><code>getCharList()</code></td>
<td>Returns the list of characters to strip off.</td>
</tr>
</tbody>
</table>
<p>Table 8.2. Public methods of the StringTrim filter</p>
<p>As you can see from the table, the @<code>StringTrim</code> filter, in addition to the <code>filter()</code> method, provides
the constructor method which you can (optionally) pass with the complete list of options to
initialize the filter, and the <code>setCharList()</code> and <code>getCharList()</code> methods which can be used for
setting specific filter options.</p>
<blockquote>
<p>All standard filters have the constructor method (optionally) accepting an array of options
for configuring the filter when instantiating it manually.</p>
</blockquote>
<p>Below, we provide two code examples showing equivalent methods of manually creating an instance
of the @<code>StringTrim</code> filter, setting its options, and filtering a value.</p>
<p><strong>Example 1. Passing options to the constructor method.</strong></p>
<pre><code class="language-php">&lt;?php
// Optionally, define a short alias for the filter class name.
use Laminas\Filter\StringTrim;

// Create an instance of the filter, passing options to the constructor.
$filter = new StringTrim(['charlist'=&gt;&quot;\r\n\t &quot;]);

// Perform the trimming operation on the string.
$filteredValue = $filter-&gt;filter(' name@example.com  ');

// The expected output of the filter is the 'name@example.com' string.
</code></pre>
<p>In the code above, we create the @<code>StringTrim</code> filter object with the help of the
<code>new</code> operator (line 6). We pass the array of options to the constructor to set the list of
characters the filter will remove (here, we tell the filter to remove the new line characters,
the tabulation character, and the space character). Actually, passing the array of options to
this filter can be omitted because the filter already has some default character list
to strip off.</p>
<p>In line 9, we call the <code>filter()</code> method and pass it the string value " name@example.com  "
to be trimmed. The expected output of this call is the "name@example.com" string.</p>
<p><strong>Example 2. Without passing options to the constructor.</strong></p>
<pre><code class="language-php">&lt;?php
// Optionally, define a short alias for the filter class name.
use Laminas\Filter\StringTrim;

// Create an instance of the filter.
$filter = new StringTrim();

// Specify which characters to remove.
$filter-&gt;setCharList(&quot;\r\n\t &quot;);

// Perform the trimming operation on the string
$filteredValue = $filter-&gt;filter(' name@example.com  ');

// The expected output of the filter is the 'name@example.com' string
</code></pre>
<p>In the code above, we create the @<code>StringTrim</code> filter object with the help of the <code>new</code> operator
(line 6).</p>
<p>In line 9, we (optionally) call the @<code>StringTrim</code> filter's <code>setCharList()</code> method to set the list of
characters the filter will remove (here, we tell the filter to remove the new line characters,
the tabulation character, and the space character). This call is optional because the filter
already has some default character list for stripping off.</p>
<p>And, in line 12, we call the <code>filter()</code> method and pass it the string value " name@example.com  "
to be trimmed. The expected output of this call is the "name@example.com" string.</p>
<h3 id="method-2-constructing-a-filter-with-staticfilter">Method 2: Constructing a Filter with StaticFilter</h3>
<p>An alternative way of manual filter instantiation is by using the @<code>StaticFilter</code> class.
The @<code>StaticFilter</code> class is some kind of a "proxy" designed for automatic filter
instantiation, configuration, and execution. For example, let's consider how to create
the same @<code>StringTrim</code> filter, configure it, and call its <code>filter()</code> method:</p>
<pre><code class="language-php">&lt;?php
// Create and execute the StringTrim filter through the StaticFilter proxy.
$filteredValue = \Laminas\Filter\StaticFilter::execute(' name@example.com  ',
                        'StringTrim', ['charlist' =&gt; &quot;\r\n\t &quot;]);

// The expected output of the filter is the 'name@example.com' string.
</code></pre>
<p>The @<code>StaticFilter</code> class provides the <code>execute()</code> static method, which takes three
arguments: the input value, the name of the filter to apply, and the array of
filter-specific options.</p>
<p>In line 3, we call the <code>execute()</code> method to automatically create the @<code>StringTrim</code>
filter, call its <code>setCharList()</code> method, and pass the input value to its <code>filter()</code>
method. This is very useful because it can be accomplished in a single line of code.</p>
<h3 id="method-3-constructing-a-filter-from-array">Method 3: Constructing a Filter From Array</h3>
<p>When using filters with form's validation rules, you typically do not construct a
filter object explicitly as we did in the previous section; instead, you pass an
array configuration to the factory class, which automatically constructs the filter
for you and (optionally) configures it. We already saw how this works when adding
validation rules for the feedback form in <a href="#forms">Collecting User Input with Forms</a>.</p>
<p>For example, let's show how to construct the same @<code>StringTrim</code> filter with the help
of the factory:</p>
<pre><code class="language-php">&lt;?php
// It is assumed that you call the following code inside of the form model's
// addInputFilter() method.

$inputFilter-&gt;add([
  // ...
  'filters'  =&gt; [
    [
      'name' =&gt; 'StringTrim',
      'options' =&gt; [
        'charlist' =&gt; &quot;\r\n\t &quot;
      ]
    ],
  ],
  // ...
];
</code></pre>
<p>In the code above, we call the <code>add()</code> method provided by the @<code>InputFilter</code>[Laminas\InputFilter\InputFilter] container class (line 5).
The <code>add()</code> method takes an array which has the <code>filters</code> key. You typically register the filters
under that key (line 7). Filters registered under that key are inserted in a filter chain in the
order they appear in the list.</p>
<p>A filter configuration typically consists of the <code>name</code> (line 9) and <code>options</code> (line 10). The name
is a fully qualified filter class name (e.g., @<code>Laminas\Filter\StringTrim</code>) or its short alias
(@<code>StringTrim</code>). The <code>options</code> is an array consisting of filter-specific options. When the factory
class instantiates the filter, it passes the list of options to the filter's constructor method, and
the constructor initializes the filter as needed.</p>
<h2 id="about-filter-plugin-manager">About Filter Plugin Manager</h2>
<p>In the previous example, you saw that you can use either the fully qualified filter class
name or its short alias when instantiating the filter from the array. The short aliases for
the standard filters are defined by the @<code>FilterPluginManager</code>[Laminas\Filter\FilterPluginManager] class.</p>
<blockquote>
<p>The @<code>FilterPluginManager</code>[Laminas\Filter\FilterPluginManager] class defines the short aliases for the standard filters.</p>
</blockquote>
<p>A standard filter's alias is typically the same as the class name. For example, the class
@<code>Laminas\Filter\StringTrim</code> has the short alias @<code>StringTrim</code>.</p>
<p>The filter plugin manager is internally used by the @<code>InputFilter</code>[Laminas\InputFilter\InputFilter] container class for
instantiating the standard filters.</p>
<h2 id="filters-behavior-in-case-of-incorrect-input-data">Filter's Behavior in Case of Incorrect Input Data</h2>
<p>Different filters behave differently if you pass it input data that the filter cannot process
correctly.</p>
<p>Some filters (such as the @<code>ToInt</code> filter) will process only scalar data. If you pass an array to such filter,
it will return the array as is.</p>
<p>Some filters can work with data in certain format only (e.g., with dates only). If filtering
of input data is impossible (for example, when you pass the filter some wrong data that it is unable
to process), the <code>filter()</code> method may throw a @<code>Laminas\Filter\Exception\RuntimeException</code> exception.
This behavior can be seen in @<code>DateTimeFormatter</code> filter.</p>
<p>Some filters (e.g., @<code>ToInt</code> or @<code>StringToLower</code>) may rise a PHP warning if the
value provided is in incorrect format and cannot be filtered.</p>
<blockquote>
<p>It is recommended to read filter's documentation carefully to know what to expect
of the filter you plan to use in your form.</p>
</blockquote>
<h2 id="filter-usage-examples">Filter Usage Examples</h2>
<p>Next, we will consider the usage of the most important standard filters. These
describe the methods (and options) a filter has and provide code examples showing how
to instantiate the filter and apply it to input data. If you need to use a filter
not covered in this section, please refer to <em>Standard Filters</em> section of the
<em>Laminas Framework Reference Manual</em>.</p>
<h3 id="filters-casting-input-data-to-a-specified-type">Filters Casting Input Data to a Specified Type</h3>
<p>In this section, we will consider several filters from the group of filters related
to casting input data to the specified type and provide their usage examples.</p>
<h4 id="toint-filter">ToInt Filter</h4>
<p>The @<code>ToInt</code> filter is a very simple filter that is designed to cast an arbitrary scalar
data to an integer. This filter may be useful when adding validation rules for
form fields that must contain an integer numeric values (e.g., a drop-down list or a
text field containing an amount of something).</p>
<p>The @<code>ToInt</code> class has the single <code>filter()</code> method.</p>
<blockquote>
<p>The @<code>ToInt</code> filter will not cast a non-scalar value. If you pass it an array, it
will return it as is.</p>
</blockquote>
<p>Below, you can find a code example illustrating the usage of the @<code>ToInt</code> filter.</p>
<pre><code class="language-php">&lt;?php
// Create ToInt filter.
$filter = new \Laminas\Filter\ToInt();

// Filter a value casting it to an integer number.
$filteredValue = $filter-&gt;filter('10'); // Returns (int) 10.
$filteredValue2 = $filter-&gt;filter(['10', '20']); // Returns array as is.
</code></pre>
<p>In the code above, we pass the string "10" to the filter (line 6). The expected return
value is the integer 10.</p>
<p>In line 7, we pass an array to the filter. Because the @<code>ToInt</code> filter works with scalar values only,
it returns the array as is (without changes) and raises a PHP warning.</p>
<h4 id="boolean-filter">Boolean Filter</h4>
<p>The @<code>Boolean</code>[Laminas\Filter\Boolean] class is a filter that is designed to cast an arbitrary data to a boolean value
(<code>true</code> or <code>false</code>). This filter can be used for filtering check box form fields.</p>
<p>Its public methods are listed in table 8.3.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filter($value)</code></td>
<td>Returns a boolean representation of <code>$value</code>.</td>
</tr>
<tr>
<td><code>setCasting($flag)</code></td>
<td>Sets casting flag.</td>
</tr>
<tr>
<td><code>getCasting()</code></td>
<td>Returns the casting flag.</td>
</tr>
<tr>
<td><code>setType($type)</code></td>
<td>Sets types from which to cast.</td>
</tr>
<tr>
<td><code>getType()</code></td>
<td>Returns types.</td>
</tr>
<tr>
<td><code>setTranslations($translations)</code></td>
<td>Sets translations.</td>
</tr>
<tr>
<td><code>getTranslations()</code></td>
<td>Returns the translations.</td>
</tr>
</tbody>
</table>
<p>Table 8.3. Public methods of the Boolean filter</p>
<p>The filter provides several methods allowing to set filtering options (<code>setCasting()</code>, <code>setType()</code>,
and <code>setTranslations()</code>).</p>
<p>The <code>setCasting()</code> method allows to choose one of two modes in which the filter may operate.
If the flag is <code>true</code>, the filter will behave like the PHP <code>(boolean)</code> cast operator. Otherwise
(if the flag is set to <code>false</code>), it will cast only from types defined by the <code>setType()</code> method, and
all other values will be returned as is.</p>
<p>The <code>setType()</code> filter's method allows to define from which types to cast. This method accepts the
single argument <code>$type</code>, which can be either an OR combination of <code>TYPE_</code>-prefixed constants or an
array containing the literal equivalents of the constants. Possible constants accepted by the
<code>setType()</code> method and their literal equivalents are listed in table 8.4:</p>
<table>
<thead>
<tr>
<th><em>Constant</em></th>
<th><em>Numeric Value</em></th>
<th><em>Literal Equivalent</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>TYPE_BOOLEAN</code></td>
<td>1</td>
<td>"boolean"</td>
<td>Returns a boolean value as is.</td>
</tr>
<tr>
<td><code>TYPE_INTEGER</code></td>
<td>2</td>
<td>"integer"</td>
<td>Converts an integer 0 value to <code>false</code>.</td>
</tr>
<tr>
<td><code>TYPE_FLOAT</code></td>
<td>4</td>
<td>"float"</td>
<td>Converts a float 0.0 value to <code>false</code>.</td>
</tr>
<tr>
<td><code>TYPE_STRING</code></td>
<td>8</td>
<td>"string"</td>
<td>Converts an empty string '' to <code>false</code>.</td>
</tr>
<tr>
<td><code>TYPE_ZERO_STRING</code></td>
<td>16</td>
<td>"zero"</td>
<td>Converts a string containing the single character zero ('0') to <code>false</code>.</td>
</tr>
<tr>
<td><code>TYPE_EMPTY_ARRAY</code></td>
<td>32</td>
<td>"array"</td>
<td>Converts an empty array to <code>false</code>.</td>
</tr>
<tr>
<td><code>TYPE_NULL</code></td>
<td>64</td>
<td>"null"</td>
<td>Converts a <code>null</code> value to <code>false</code>.</td>
</tr>
<tr>
<td><code>TYPE_PHP</code></td>
<td>127</td>
<td>"php"</td>
<td>Converts values according to PHP when casting them to boolean. (This is the default behavior.)</td>
</tr>
<tr>
<td><code>TYPE_FALSE_STRING</code></td>
<td>128</td>
<td>"false"</td>
<td>Converts a string containing the word "false" to a boolean <code>false</code>.</td>
</tr>
<tr>
<td><code>TYPE_LOCALIZED</code></td>
<td>256</td>
<td>"localized"</td>
<td>Converts a localized string which contains certain word to boolean.</td>
</tr>
<tr>
<td><code>TYPE_ALL</code></td>
<td>511</td>
<td>"all"</td>
<td>Converts all above types to boolean.</td>
</tr>
</tbody>
</table>
<p>Table 8.4. Type constants</p>
<p>The following code example shows two equivalent ways you can call the <code>setType()</code> method:</p>
<pre><code class="language-php">&lt;?php
use Laminas\Filter\Boolean;

// Call the setType() and pass it a combination of constants.
$filter-&gt;setType(Boolean::TYPE_BOOLEAN|
                 Boolean::TYPE_INTEGER|
                 Boolean::TYPE_STRING);

// Call the setType() and pass it an array with literal equivalents.
$filter-&gt;setType(['boolean', 'integer', 'string']);
</code></pre>
<p>The <code>setTranslations()</code> method allows to define localized equivalents of boolean <code>true</code> and <code>false</code>
values. This method accepts a single parameter, which must be an array in the form of <em>key=&gt;value</em>
pairs, where the <em>key</em> is a localized string and the <em>value</em> is its boolean representation. The
following code example shows how to use the <code>setTranlsations()</code> method:</p>
<pre><code class="language-php">&lt;?php
$filter-&gt;setTranslations([
  'yes' =&gt; true,    // English 'yes'
  'no'  =&gt; false,   // English 'no'
  'ja'  =&gt; true,    // German 'yes'
  'nicht' =&gt; false, // German 'no'
  'да'  =&gt; true,    // Russian 'yes'
  'нет' =&gt; false    // Russian 'no'
  ]);
</code></pre>
<p>Below, we provide a code example illustrating the usage of the @<code>Boolean</code>[Laminas\Filter\Boolean] filter.</p>
<pre><code class="language-php">&lt;?php
// Create ToBoolean filter.
$filter = new \Laminas\Filter\Boolean();

// Optionally configure the filter.
$filter-&gt;setCasting(true);
$filter-&gt;setType(\Laminas\Filter\Boolean::TYPE_ALL);
$filter-&gt;setTranslations(['yes'=&gt;true, 'no'=&gt;false]);

// Filter a value casting it to a boolean number.
$filteredValue = $filter-&gt;filter('false'); // Returns boolean false.
$filteredValue2 = $filter-&gt;filter('1'); // Returns boolean true.
$filteredValue3 = $filter-&gt;filter('false'); // Returns boolean false.
$filteredValue4 = $filter-&gt;filter('yes'); // Returns boolean true.
</code></pre>
<h4 id="tonull-filter">ToNull Filter</h4>
<p>The @<code>ToNull</code> filter is designed to cast an arbitrary data to a <code>null</code> value if it meets specific
criteria. This may be useful when you work with a database and want to have a <code>null</code> value instead
of any other type. If the value cannot be treated as <code>null</code>, the filter will return the value as is.</p>
<p>The @<code>ToNull</code> filter's public methods are listed in table 8.5.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filter($value)</code></td>
<td>Casts the <code>$value</code> to <code>null</code>, if possible; otherwise returns values as is.</td>
</tr>
<tr>
<td><code>setType($type)</code></td>
<td>Defines from which types to cast.</td>
</tr>
<tr>
<td><code>getType()</code></td>
<td>Returns defined types.</td>
</tr>
</tbody>
</table>
<p>Table 8.5. Public methods of the ToNull filter</p>
<p>By default, the <code>ToNull</code> filter behaves like PHP's <code>empty()</code> function: if the <code>empty()</code> function
returns a boolean <code>true</code> on the input data, then the filter will return the <code>null</code> value on that
data, as well.</p>
<p>The <code>setType()</code> method can be used to set the type from which the filter will cast to <code>null</code>.
This method takes a single parameter, which can either be a combination of <code>TYPE_</code>-prefixed
constants listed in table 8.6 or an array of their literal equivalents.</p>
<table>
<thead>
<tr>
<th><em>Constant</em></th>
<th><em>Numeric Value</em></th>
<th><em>Literal Equivalent</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>TYPE_BOOLEAN</code></td>
<td>1</td>
<td>"boolean"</td>
<td>Converts a boolean <code>false</code> value to <code>null</code>.</td>
</tr>
<tr>
<td><code>TYPE_INTEGER</code></td>
<td>2</td>
<td>"integer"</td>
<td>Converts an integer 0 value to <code>null</code>.</td>
</tr>
<tr>
<td><code>TYPE_EMPTY_ARRAY</code></td>
<td>4</td>
<td>"array"</td>
<td>Converts an empty array to <code>null</code>.</td>
</tr>
<tr>
<td><code>TYPE_STRING</code></td>
<td>8</td>
<td>"string"</td>
<td>Converts an empty string '' to <code>null</code>.</td>
</tr>
<tr>
<td><code>TYPE_ZERO_STRING</code></td>
<td>16</td>
<td>"zero"</td>
<td>Converts a string containing the single character zero ('0') to <code>null</code>.</td>
</tr>
<tr>
<td><code>TYPE_FLOAT</code></td>
<td>32</td>
<td>"float"</td>
<td>Converts a float 0.0 value to <code>null</code>.</td>
</tr>
<tr>
<td><code>TYPE_ALL</code></td>
<td>63</td>
<td>"all"</td>
<td>Converts all above types to <code>null</code>. This is the default behavior.</td>
</tr>
</tbody>
</table>
<p>Table 8.6. Type constants</p>
<p>The following code example illustrates two equivalent ways you can call the <code>setType()</code> method:</p>
<pre><code class="language-php">&lt;?php
use Laminas\Filter\ToNull;

// Call the setType() and pass it a combination of constants.
$filter-&gt;setType(ToNull::TYPE_ZERO_STRING|ToNull::TYPE_STRING);

// Call the setType() and pass it an array with literal equivalents.
$filter-&gt;setType(['zero', 'string']);
</code></pre>
<p>Below, a code example showing how to use the @<code>ToNull</code> filter is provided:</p>
<pre><code class="language-php">&lt;?php
// Create ToNull filter.
$filter = new \Laminas\Filter\ToNull();

// Optionally configure the filter.
$filter-&gt;setType(\Laminas\Filter\ToNull::TYPE_ALL);

$filteredValue = $filter-&gt;filter('0'); // Returns null.
$filteredValue2 = $filter-&gt;filter('1'); // Returns string '1'.
$filteredValue3 = $filter-&gt;filter(false); // Returns null.
</code></pre>
<h4 id="datetimeformatter-filter">DateTimeFormatter Filter</h4>
<p>The @<code>DateTimeFormatter</code> filter accepts a date in an arbitrary format and converts it into
the desired format.</p>
<blockquote>
<p>This filter can accept a string (e.g., '2014-03-22 15:36'), an integer timestamp
(like the <code>time()</code> PHP function returns) or an instance of the <code>DateTime</code> PHP class.
The @<code>DateTimeFormatter</code> filter may throw a @<code>Laminas\Filter\Exception\InvalidArgumentException</code>
exception if you pass it a date in an incorrect format.</p>
</blockquote>
<p>Filter's public methods are listed in table 8.7.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructs the filter.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Transforms the date into the desired format.</td>
</tr>
<tr>
<td><code>setFormat($format)</code></td>
<td>Sets the date format.</td>
</tr>
</tbody>
</table>
<p>Table 8.7. Public methods of the DateTimeFormatter filter</p>
<p>In the code example below, we show how to create the filter, pass it a string date, and
convert it to the desired format:</p>
<pre><code class="language-php">&lt;?php
// Create DateTimeFormatter filter.
$filter = new \Laminas\Filter\DateTimeFormatter();

// Set filter's format (optional).
$filter-&gt;setFormat('F j, Y g:i A');

// Transform the date to the specified format.
$filteredValue = $filter-&gt;filter('2014-03-22 15:36');

// The expected output is 'March 22, 2014 3:36 PM'.
</code></pre>
<blockquote>
<p>Internally, the @<code>DateTimeFormatter</code> filter uses the <code>DateTime</code> class from the PHP standard
library for converting and formatting dates. For available date formats, please refer to the
PHP documentation for the <code>DateTime</code> class.</p>
</blockquote>
<h3 id="filters-performing-manipulations-on-a-file-path">Filters Performing Manipulations on a File Path</h3>
<p>In this section, we will consider usage examples of the filters from the group of filters related
to manipulating file paths.</p>
<h4 id="basename-filter">BaseName Filter</h4>
<p>The @<code>BaseName</code> filter class is just a wrapper on the <code>basename()</code> PHP function.
It takes a string containing the path to a file or directory and returns the trailing
name component.</p>
<p>Below, you can find an example of the @<code>BaseName</code> filter usage:</p>
<pre><code class="language-php">&lt;?php
// Create BaseName filter.
$filter = new \Laminas\Filter\BaseName();

// Filter a file path and return its last part.
$filteredValue = $filter-&gt;filter('/var/log/httpd/error.log');

// The expected filter's output is the 'error.log'.
</code></pre>
<blockquote>
<p>The @<code>BaseName</code> filter will not process a non-scalar value. If you pass it an array, it
will return the array as is and raise a PHP warning.</p>
</blockquote>
<h4 id="dir-filter">Dir Filter</h4>
<p>The @<code>Dir</code> filter class is just a wrapper on the <code>dirname()</code> PHP function.
It takes a string containing the path to a file or directory and returns the parent
directory's path.</p>
<blockquote>
<p>The @<code>Dir</code> filter will not process a non-scalar value. If you pass it an array, it
will return the array as is.</p>
</blockquote>
<p>Below, a code example demonstrating the usage of the @<code>Dir</code> filter is provided.</p>
<pre><code class="language-php">&lt;?php
// Create Dir filter.
$filter = new \Laminas\Filter\Dir();

// Filter a file path and return its directory name part.
$filteredValue = $filter-&gt;filter('/var/log/httpd/error.log');

// The expected filter's output is the '/var/log/httpd'.
</code></pre>
<h4 id="realpath-filter">RealPath Filter</h4>
<p>The @<code>RealPath</code> filter takes an absolute or a relative file path as a string input argument. It
expands all symbolic links and resolves references to '/./', '/../' and extra '/' characters
in the input path and returns the canonicalized absolute pathname.</p>
<blockquote>
<p>The @<code>RealPath</code> filter is a wrapper over the <code>realpath()</code> PHP function.</p>
</blockquote>
<p>Filter's public methods are listed in table 8.8.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructs the filter.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Returns canonicalized absolute pathname.</td>
</tr>
<tr>
<td><code>setExists($flag)</code></td>
<td>Specifies if the path must exist for this filter to succeed. The value <code>true</code> means the path must exist; the value <code>false</code> means a nonexisting path can be given.</td>
</tr>
<tr>
<td><code>getExists()</code></td>
<td>Returns <code>true</code> if the filtered path must exist.</td>
</tr>
</tbody>
</table>
<p>Table 8.8. Public methods of the RealPath filter</p>
<p>The @<code>RealPath</code> filter returns a boolean <code>false</code> on failure, e.g., if the file does not
exist. If a nonexisting path is allowed, you can call the <code>setExists()</code> method with the
<code>false</code> parameter.</p>
<p>Below, a code example demonstrating the usage of the @<code>RealPath</code> filter is provided.</p>
<pre><code class="language-php">&lt;?php
// Create RealPath filter.
$filter = new \Laminas\Filter\RealPath();

// Filter a file path (it is assumed that the current
// working directory is /var/log/httpd and that it contains
// the error.log file).
$filteredValue = $filter-&gt;filter('./error.log');

// The expected filter's output is the '/var/log/httpd/error.log'.
</code></pre>
<blockquote>
<p>The @<code>RealPath</code> filter will not process a non-scalar value. If you pass it an array, it
will return the array as is.</p>
</blockquote>
<h3 id="filters-performing-compression-and-encryption-of-input-data">Filters Performing Compression and Encryption of Input Data</h3>
<p>In this section, we will consider several filters from the group of filters related
to compressing and encrypting the input data. These filters are not very usable for
filtering form data but can be used outside of forms with a great success.</p>
<h4 id="compress-filter">Compress Filter</h4>
<p>The @<code>Compress</code> filter is designed to compress input data with some compression algorithm. For
example, you can use this filter to compress the data and save it as an archive file.</p>
<p>Filter's public methods are listed in table 8.9.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructs the filter.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Performs data compression using the specified algorithm.</td>
</tr>
<tr>
<td><code>getAdapter()</code></td>
<td>Returns the current adapter, instantiating it if necessary.</td>
</tr>
<tr>
<td><code>getAdapterName()</code></td>
<td>Retrieves adapter name.</td>
</tr>
<tr>
<td><code>setAdapter($adapter)</code></td>
<td>Sets compression adapter.</td>
</tr>
<tr>
<td><code>getAdapterOptions()</code></td>
<td>Retrieves adapter options.</td>
</tr>
<tr>
<td><code>setAdapterOptions($options)</code></td>
<td>Sets adapter options.</td>
</tr>
<tr>
<td><code>getOptions($option)</code></td>
<td>Gets individual or all options from underlying adapter.</td>
</tr>
</tbody>
</table>
<p>Table 8.9. Public methods of the Compress filter</p>
<p>The @<code>Compress</code> filter itself cannot compress data. Instead, it uses a so-called <em>adapter</em> class.
The adapter class must implement the @<code>CompressionAlgorithmInterface</code> interface. You attach an
adapter to the @<code>Compress</code> filter, and the adapter implements the concrete compression algorithm.</p>
<p>There are several standard adapter classes available (see figure 8.2 and table 8.10 below). Those
classes live in the @<code>Laminas\Filter\Compress</code>[Laminas\Filter] namespace.</p>
<table>
<thead>
<tr>
<th><em>Class name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>@<code>Bz2</code></td>
<td><a href="http://www.bzip.org/">Bzip2</a> (Burrows–Wheeler) compression algorithm.</td>
</tr>
<tr>
<td>@<code>Gz</code></td>
<td><a href="http://www.gzip.org/">Gzip</a> compression algorithm is based on the Deflate algorithm, which is a combination of LZ77 and Huffman coding.</td>
</tr>
<tr>
<td>@<code>Zip</code></td>
<td>ZIP is a compression algorithm widely used in Windows operating system.</td>
</tr>
<tr>
<td>@<code>Tar</code></td>
<td><a href="http://www.gnu.org/software/tar/tar.html">Tarball</a> file format is now commonly used to collect many files into one larger file for archiving while preserving file system information such as user and group permissions, dates, and directory structures. Widely used in Linux operating system.</td>
</tr>
<tr>
<td>@<code>Lzf</code></td>
<td>LZF is a very fast compression algorithm, ideal for saving space with only slight speed cost.</td>
</tr>
<tr>
<td>@<code>Snappy</code></td>
<td><a href="https://code.google.com/p/snappy/">Snappy</a> is a fast data compression and decompression library developed by Google based on ideas from LZ77.</td>
</tr>
<tr>
<td>@<code>Rar</code></td>
<td>RAR is an archive file format that supports data compression, error recovery, and file spanning.</td>
</tr>
</tbody>
</table>
<p>Table 8.10. Compression adapters</p>
<p><img alt="Figure 8.2. Compression algorithm adapter inheritance" src="../images/filters/compression_algorithm_inheritance.png" /></p>
<p>Below, a code example demonstrating the usage of the @<code>Compress</code> filter is provided.</p>
<pre><code class="language-php">&lt;?php
// Create Compress filter.
$filter = new \Laminas\Filter\Compress();

// Configure the adapter.
$filter-&gt;setAdapter('Zip');
$filter-&gt;setAdapterOptions([
        'archive' =&gt; 'example.zip',
    ]);

// Compress an input data (it is assumed that you have the testfile.txt
// file in the current working directory.
$filter-&gt;filter('testfile.txt');
</code></pre>
<p>In the code above, we create the instance of the @<code>Compress</code> filter (line 3), set its adapter
(line 6), set adapter's options (line 7), and finally, compress the input file (line 13). The
expected result, the <em>example.zip</em> archive file, will be created in the current directory. The
archive will contain the <em>testfile.txt</em> file.</p>
<blockquote>
<p>The @<code>Decompress</code> filter is a "mirror reflection" of the @<code>Compress</code> filter and can be
used by analogy. By that reason, we do not cover the @<code>Decompress</code> filter in this section.</p>
</blockquote>
<h4 id="encrypt-filter">Encrypt Filter</h4>
<p>The @<code>Encrypt</code>[Laminas\Filter\Decrypt] filter's purpose is encrypting the input data with the specified algorithm.
Filter's public methods are listed in table 8.11.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructs the filter.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Performs data encrypting using the specified algorithm.</td>
</tr>
<tr>
<td><code>getAdapter()</code></td>
<td>Returns the current adapter, instantiating it if necessary.</td>
</tr>
<tr>
<td><code>setAdapter($adapter)</code></td>
<td>Sets encrypting adapter.</td>
</tr>
</tbody>
</table>
<p>Table 8.11. Public methods of the Encrypt filter</p>
<p>The @<code>Encrypt</code>[Laminas\Filter\Encrypt] filter uses <em>adapter</em> classes to perform actual data encryption. You attach an
adapter to the @<code>Encrypt</code>[Laminas\Filter\Encrypt] filter with the <code>setAdapter()</code> method, and the adapter performs the
concrete encryption. An adapter class must implement the @<code>EncryptionAlgorithmInterface</code> interface.</p>
<p>There are several standard adapter classes available (see figure 8.3 below). Those
classes live in the @<code>Laminas\Filter\Encrypt</code>[Laminas\Filter] namespace.</p>
<ul>
<li>@<code>BlockCipher</code>[Laminas\Filter\Encrypt\BlockCipher] -- implements symmetric block cipher algorithm.</li>
<li>@<code>Openssl</code>[Laminas\Filter\Encrypt\Openssl] -- uses an encryption algorithm from the OpenSSL library.</li>
</ul>
<p><img alt="Figure 8.3. Encryption algorithm adapter inheritance" src="../images/filters/encryption_algorithm_inheritance.png" /></p>
<p>Below, a code example demonstrating the usage of the @<code>Encrypt</code>[Laminas\Filter\Encrypt] filter is provided.</p>
<pre><code class="language-php">&lt;?php
// Create Encrypt filter.
$filter = new \Laminas\Filter\Encrypt();

// Set encryption adapter.
$filter-&gt;setAdapter('BlockCipher');

// Encrypt an input data.
$filteredValue = $filter-&gt;filter('some data to encrypt');
</code></pre>
<p>The expected result is a string encrypted with the block cipher.</p>
<blockquote>
<p>The @<code>Decrypt</code>[Laminas\Filter\Decrypt] filter is a "mirror reflection" of the @<code>Encrypt</code>[Laminas\Filter\Encrypt] filter and can be
used by analogy. By that reason, we do not cover the @<code>Decrypt</code>[Laminas\Filter\Decrypt] filter in this section.</p>
</blockquote>
<h3 id="filters-manipulating-string-data">Filters Manipulating String Data</h3>
<p>In this section, we will consider usage examples of the filters from the group of filters related
to manipulating string data.</p>
<h4 id="stringtolower-filter">StringToLower Filter</h4>
<p>The @<code>StringToLower</code> filter class is designed for converting the input string data to lowercase
letters. The public methods of the filter are provided in table 8.12 below.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructs the filter.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Converts the string to lowercase letters.</td>
</tr>
<tr>
<td><code>setEncoding($encoding)</code></td>
<td>Sets the input encoding for the given string.</td>
</tr>
<tr>
<td><code>getEncoding()</code></td>
<td>Returns the encoding.</td>
</tr>
</tbody>
</table>
<p>Table 8.12. Public methods of the StringToLower filter</p>
<p>By default, the filter behaves like the <code>strtolower()</code> PHP function. Given a string, it returns
the string with all alphabetic characters converted to lowercase. The "alphabetic characters" are
determined by the system locale. This means that in, for example, the default "C" locale,
characters such as umlaut-A (Ä) will not be converted.</p>
<p>Calling the <code>setEncoding()</code> method on the filter and passing it an encoding to use forces this
filter to behave like the <code>mb_strtolower()</code> PHP function. By contrast to <code>strtolower()</code>, "alphabetic"
is determined by the Unicode character properties. Thus, the behavior of this function is not affected
by locale settings, and it can convert any characters that have 'alphabetic' property, such as A-umlaut (Ä).</p>
<blockquote>
<p>If the value provided is non-scalar, the value will remain unfiltered,
and an <code>E_USER_WARNING</code> will be raised indicating it cannot be filtered.</p>
</blockquote>
<p>Below, a code example showing how to use the @<code>StringToLower</code> filter is provided:</p>
<pre><code class="language-php">&lt;?php
// Create StringToLower filter.
$filter = new \Laminas\Filter\StringToLower();

// (Optionally) set encoding on the filter.
$filter-&gt;setEncoding('UTF-8');

// Filter a string.
$filteredValue = $filter-&gt;filter('How to Start a Business in 10 Days');

// The expected filter's output is the 'how to start a business in 10 days'.
</code></pre>
<blockquote>
<p>The @<code>StringToUpper</code> filter (converting a string to uppercase letters) is a "mirror reflection"
of the @<code>StringToLower</code> filter and can be used by analogy. By that reason, we do not cover the @<code>StringToUpper</code>
filter in this section.</p>
</blockquote>
<h4 id="pregreplace-filter">PregReplace Filter</h4>
<p>The @<code>PregReplace</code> filter can be used for performing a regular expression search and replace in a string data.
This filter is a wrapper over the <code>preg_replace()</code> PHP function. The public methods of the filter are provided in table 8.13 below.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructs the filter.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Performs a regular expression search and replace.</td>
</tr>
<tr>
<td><code>setPattern($pattern)</code></td>
<td>Sets the pattern to search for. It can be either a string or an array with strings.</td>
</tr>
<tr>
<td><code>getPattern()</code></td>
<td>Returns the pattern.</td>
</tr>
<tr>
<td><code>setReplacement($replacement)</code></td>
<td>Sets the string or an array with strings to replace.</td>
</tr>
<tr>
<td><code>getReplacement()</code></td>
<td>Gets currently set replacement value.</td>
</tr>
</tbody>
</table>
<p>Table 8.13. Public methods of the PregReplace filter</p>
<p>Below, a code example showing how to use the @<code>PregReplace</code> filter is provided:</p>
<pre><code class="language-php">&lt;?php
// Create PregReplace filter.
$filter = new \Laminas\Filter\PregReplace();

// Configure the filter.
$filter-&gt;setPattern(&quot;/\s\s+/&quot;);
$filter-&gt;setReplacement(' ');

// Filter a string.
$filteredValue = $filter-&gt;filter('An example    with    multiple     spaces.');

// The expected filter's output is the 'An example with multiple spaces.'
</code></pre>
<h4 id="striptags-filter">StripTags Filter</h4>
<p>The @<code>StripTags</code> filter removes all tags (e.g. <code>&lt;!-- --&gt;</code>, <code>&lt;p&gt;</code>, <code>&lt;h1&gt;</code> or <code>&lt;?php ?&gt;</code>) from the input string.
It allows to explicitly define the tags which should not be stripped out. Additionally,
it provides an ability to specify which attributes are allowed across all allowed tags and/or specific tags only.</p>
<p>Public methods of the @<code>StripTags</code> filter are listed in table 8.14.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructs the filter.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Returns the value with tags stripped off it.</td>
</tr>
<tr>
<td><code>getAttributesAllowed()</code></td>
<td>Returns the list of attributes allowed for the tags.</td>
</tr>
<tr>
<td><code>setAttributesAllowed($attributesAllowed)</code></td>
<td>Sets the list of attributes allowed for the tags.</td>
</tr>
<tr>
<td><code>getTagsAllowed()</code></td>
<td>Returns the list of tags allowed.</td>
</tr>
<tr>
<td><code>setTagsAllowed($tagsAllowed)</code></td>
<td>Sets the list of tags allowed.</td>
</tr>
</tbody>
</table>
<p>Table 8.14. Public methods of the StripTags filter</p>
<p>Below, a code example showing how to use the @<code>StripTags</code> filter is provided:</p>
<pre><code class="language-php">&lt;?php
// Create StripTags filter.
$filter = new \Laminas\Filter\StripTags();

// Configure the filter.
$filter-&gt;setTagsAllowed(['p']);

// Filter a string.
$filteredValue = $filter-&gt;filter(
  '&lt;p&gt;Please click the following &lt;a href=&quot;example.com&quot;&gt;link&lt;/a&gt;.&lt;/p&gt;');

// The expected filter's output is the
// '&lt;p&gt;Please click the following link.&lt;/p&gt;;'
</code></pre>
<blockquote>
<p>The @<code>StripTags</code> will not process a non-scalar value. If the value passed to the
filter is non-scalar, the value will remain unfiltered.</p>
</blockquote>
<h4 id="stripnewlines-filter">StripNewlines Filter</h4>
<p>The @<code>StripNewlines</code> filter is a very simple filter which returns the input string
without any newline control characters ("\r", "\n").</p>
<p>Below, a code example showing how to use the @<code>StripNewlines</code> filter is provided:</p>
<pre><code class="language-php">&lt;?php
// Create StripNewlines filter.
$filter = new \Laminas\Filter\StripNewlines();

// Filter a string.
$filteredValue = $filter-&gt;filter(&quot;A multi line\r\n string&quot;);

// The expected filter's output is the 'A multi line string'.
</code></pre>
<blockquote>
<p>The @<code>StripNewlines</code> will not process a non-scalar value. If the value passed to the
filter is non-scalar, the value will remain unfiltered.</p>
</blockquote>
<h4 id="urinormalize-filter">UriNormalize Filter</h4>
<p>The @<code>UriNormalize</code> filter can be used for normalizing a URL string and (optionally) applying
a scheme part to it. The public methods of the filter are provided in table 8.15 below.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filter($value)</code></td>
<td>Filter the URL by normalizing it and applying a default scheme if set.</td>
</tr>
<tr>
<td><code>setDefaultScheme($defaultScheme)</code></td>
<td>Set the default scheme to use when parsing schemeless URIs.</td>
</tr>
<tr>
<td><code>setEnforcedScheme($enforcedScheme)</code></td>
<td>Set a URI scheme to enforce on schemeless URIs.</td>
</tr>
</tbody>
</table>
<p>Table 8.15. Public methods of the UriNormalize filter</p>
<p>The URL normalization procedure typically consists of the following steps:</p>
<ol>
<li>The URL string is decomposed into its schema, host, port number, path, and query parts.
   If the scheme part is missing from the original URL, the default scheme is used.</li>
<li>The scheme and host parts are converted to lowercase letters.</li>
<li>The port number is checked against the list of allowed port numbers, and if it doesn't belong to the list, the port number is cleared.</li>
<li>The path part of the URL is filtered, removing redundant dot segments, URL-decoding any over-encoded
   characters, and URL-encoding everything that needs to be encoded and is not.</li>
<li>The query part is sanitized, URL-decoding everything that doesn't need to be encoded and
   URL-encoding everything else.</li>
</ol>
<p>The URL normalization procedure rules may be different for different protocols (schemes). If the URL doesn't contain
the scheme part, the <code>http</code> scheme is assumed by default. You may use the @<code>UriNormalize</code> filter's <code>setDefaultScheme()</code> method
to set the default scheme for URL normalization. It accepts any of the following schemes: <code>http</code>, <code>https</code>, <code>file</code>, <code>mailto</code>,
<code>urn</code>, and <code>tag</code>.</p>
<p>Additionally, the @<code>UriNormalize</code> filter's <code>setEnforcedScheme()</code> allows to override the default scheme
part by the so-called "enforced scheme", if the original URL doesn't contain scheme part.</p>
<p>Below, a code example showing how to use the @<code>UriNormalize</code> filter is provided:</p>
<pre><code class="language-php">&lt;?php
// Create UriNormalize filter.
$filter = new \Laminas\Filter\UriNormalize();

// Configure the filter.
$filter-&gt;setDefaultScheme('http');
$filter-&gt;setEnforcedScheme('https');

// Filter an URL string.
$filteredValue = $filter-&gt;filter('www.example.com');

// The expected filter's output is the 'https://www.example.com/'.
</code></pre>
<h3 id="organizing-filters-in-a-chain">Organizing Filters in a Chain</h3>
<p>Filters can be organized in a sequence. This is accomplished by the @<code>FilterChain</code>[Laminas\Filter\FilterChain] class. When
such a compound filter is run, the value filtered by the first filter is passed as an input for
the second one, and then the value filtered by the second filter will be passed to the third one,
and so on.</p>
<blockquote>
<p>The @<code>FilterChain</code>[Laminas\Filter\FilterChain] class is internally used by the @<code>InputFilter</code>[Laminas\InputFilter\InputFilter] container class for storing the
sequence of filters attached to the form model's field.</p>
</blockquote>
<p>Public methods provided by the @<code>FilterChain</code>[Laminas\Filter\FilterChain] class are presented in table 8.16:</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filter($value)</code></td>
<td>Returns value filtered through each filter in the chain. Filters are run in the order in which they were added to the chain (FIFO).</td>
</tr>
<tr>
<td><code>setOptions($options)</code></td>
<td>Sets options.</td>
</tr>
<tr>
<td><code>attach($callback, $priority)</code></td>
<td>Attaches an existing filter instance (or a callback function) to the chain.</td>
</tr>
<tr>
<td><code>attachByName($name, $options, $priority)</code></td>
<td>Instantiates the filter by class name or alias and inserts it into the chain.</td>
</tr>
<tr>
<td><code>merge($filterChain)</code></td>
<td>Merges the filter chain with another filter chain.</td>
</tr>
<tr>
<td><code>getFilters()</code></td>
<td>Returns all the attached filters.</td>
</tr>
<tr>
<td><code>count()</code></td>
<td>Returns the count of attached filters.</td>
</tr>
</tbody>
</table>
<p>Table 8.16. Public methods of the FilterChain filter</p>
<p>An example filter chain is shown in figure 8.4. It consists of the @<code>StringTrim</code> filter followed by
the @<code>StripTags</code> filter, which is then followed by the @<code>StripNewlines</code> filter.</p>
<p><img alt="Figure 8.4. Filter chain" src="../images/filters/filter_chain.png" /></p>
<p>To construct the filter chain like in figure 8.4, we can use the following code:</p>
<pre><code class="language-php">&lt;?php
use Laminas\Filter\FilterChain;

// Instantiate the filter chain.
$filter = new FilterChain();

// Insert filters into filter chain.
$filter-&gt;setOptions([
    'filters'=&gt;[
        [
            'name'=&gt;'StringTrim',
            'options'=&gt;['charlist'=&gt;&quot;\r\n\t &quot;],
            'priority'=&gt;FilterChain::DEFAULT_PRIORITY
        ],
        [
            'name'=&gt;'StripTags',
            'options'=&gt;['tagsallowed'=&gt;['p']],
            'priority'=&gt;FilterChain::DEFAULT_PRIORITY
        ],
        [
            'name'=&gt;'StripNewlines',
            'priority'=&gt;FilterChain::DEFAULT_PRIORITY
        ]
    ]
]);

// Execute all filters in the chain.
$filteredValue = $filter-&gt;filter(&quot;  name@example.com&lt;html&gt;\n &quot;);

// The expected output is 'name@example.com'.
</code></pre>
<p>In the code above, we instantiate the @<code>FilterChain</code>[Laminas\Filter\FilterChain] filter with the <code>new</code> operator (line 5). In
line 8, we set construct the chain of filters with the <code>setOptions()</code> method.</p>
<p>The method takes an array configuration which looks the same way as in @<code>InputFilter</code>[Laminas\InputFilter\InputFilter]'s <code>add()</code> method.
The array has "filters" key where you register the filters you want to insert into the chain. For each attached
filter, you provide the following subkeys:</p>
<ul>
<li>"name" is the fully qualified class name of the filter (e.g., <code>StringTrim::class</code>) or its short alias (e.g., "StringTrim");</li>
<li>"options" is an array of options passed to the filter; and</li>
<li>"priority" is the optional key which defines the priority of the filter in the chain. Filters
    with higher priority are visited first. The default value for the priority is <code>DEFAULT_PRIORITY</code>.</li>
</ul>
<p>Finally, in line 28, we call the <code>filter()</code> method, which walks through the chain and passes the filtered
value to each filter in turn.</p>
<h3 id="custom-filtering-with-the-callback-filter">Custom Filtering with the Callback Filter</h3>
<p>Standard filters are designed to be used in frequently appearing situations. For example, you may
often need to trim a string or convert it to lowercase. However, sometimes there are cases
where you cannot use a standard filter. Here, the @<code>Callback</code>[Laminas\Filter\Callback] filter will be handy.</p>
<p>The @<code>Callback</code>[Laminas\Filter\Callback] filter is designed as a wrapper for your custom filtering algorithm. For example, this may
be useful when a standard filter is not suitable, and you need to apply your own filtering
algorithm to the data.</p>
<blockquote>
<p>You implement your custom filtering algorithm as a callback function or a callback class method.
A <em>callback</em> is a function or a public method of a class which is called by the @<code>Callback</code>[Laminas\Filter\Callback] filter
and is passed the value to be filtered and, optionally, user-defined argument(s).</p>
</blockquote>
<p>The public methods provided by the @<code>Callback</code>[Laminas\Filter\Callback] filter are listed in table 8.17.</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filter($value)</code></td>
<td>Executes a callback function as a filter.</td>
</tr>
<tr>
<td><code>setCallback($callback)</code></td>
<td>Sets a new callback for this filter.</td>
</tr>
<tr>
<td><code>getCallback()</code></td>
<td>Returns callback set for the filter.</td>
</tr>
<tr>
<td><code>setCallbackParams($params)</code></td>
<td>Sets parameters for the callback.</td>
</tr>
<tr>
<td><code>getCallbackParams()</code></td>
<td>Gets parameters for the callback.</td>
</tr>
</tbody>
</table>
<p>Table 8.17. Public methods of the Callback filter</p>
<p>As you can see from the table, the @<code>Callback</code>[Laminas\Filter\Callback] filter provides the <code>setCallback()</code> and <code>setCallbackParams()</code>
methods that can be used to set the callback function (or the callback class method) and,
optionally, pass it one or several parameters.</p>
<h4 id="example">Example</h4>
<p>To demonstrate the usage of the @<code>Callback</code>[Laminas\Filter\Callback] filter, let's add the phone number field
to our <code>ContactForm</code> form model class and attach a custom filter to it.</p>
<p>An international phone number typically looks like "1 (808) 456-7890". It consists of the country code followed
by the three-digit area code enclosed into braces. The rest of the phone consists of the seven-digit subscriber code
divided in two groups separated by a dash. The country code, the area code, and the subscriber code
are separated by the space character. We will refer to this phone format as the "international" format.</p>
<p>The international phone format is required for making telephone calls between different countries (or areas).
If the calls are made within the same area, the telephone number may simply look like "456-7890" (we
just omit the country code and area code). We will refer to this phone format as the "local" phone format.</p>
<p>To make our filter as generic as possible, we assume that the
user is required to enter the phone in international format for some forms and in local format for other forms.
Because some site visitors may enter their phone number in a format different from what is required,
we want to apply the filter that will "normalize" the phone number for us.</p>
<p>To do the phone "normalization", the filter will:</p>
<ol>
<li>Strip out any non-numeric characters of the input value.</li>
<li>Pad the digits to the required length if there are too few digits.</li>
<li>Add the braces, the spaces, and the dash (when using the international format);
    or simply add the dash (when using the local format).</li>
</ol>
<p>Because Laminas does not provide a standard filter for accomplishing such phone filtering operation,
we will use the @<code>Callback</code>[Laminas\Filter\Callback] wrapper filter. To do that, we will make the following
changes to the code of our <code>ContactForm</code> class:</p>
<pre><code class="language-php">&lt;?php
// ...
class ContactForm extends Form
{
  // ...
  protected function addElements()
  {
    // ...

    // Add &quot;phone&quot; field
    $this-&gt;add([
        'type'  =&gt; 'text',
        'name' =&gt; 'phone',
        'attributes' =&gt; [
           'id' =&gt; 'phone'
        ],
        'options' =&gt; [
           'label' =&gt; 'Your Phone',
        ],
     ]);
  }

  private function addInputFilter()
  {
    // ...
    $inputFilter-&gt;add([
        'name'     =&gt; 'phone',
        'required' =&gt; true,
        'filters'  =&gt; [
          [
            'name' =&gt; 'Callback',
            'options' =&gt; [
              'callback' =&gt; [$this, 'filterPhone'],
              'callbackParams' =&gt; [
                'format' =&gt; 'intl'
              ]
            ]
          ],
        ],
      ]);
  }

  // Custom filter for a phone number.
  public function filterPhone($value, $format)
  {
    if(!is_scalar($value)) {
      // Return non-scalar value unfiltered.
      return $value;
    }

    $value = (string)$value;

    if(strlen($value)==0) {
      // Return empty value unfiltered.
      return $value;
    }

    // First, remove any non-digit character.
    $digits = preg_replace('#[^0-9]#', '', $value);

    if($format == 'intl') {
      // Pad with zeros if the number of digits is incorrect.
      $digits = str_pad($digits, 11, &quot;0&quot;, STR_PAD_LEFT);

      // Add the braces, the spaces, and the dash.
      $phoneNumber = substr($digits, 0, 1) . ' ('.
                     substr($digits, 1, 3) . ') ' .
                     substr($digits, 4, 3) . '-'.
                     substr($digits, 7, 4);
    } else { // 'local'
      // Pad with zeros if the number of digits is incorrect.
      $digits = str_pad($digits, 7, &quot;0&quot;, STR_PAD_LEFT);

      // Add the dash.
      $phoneNumber = substr($digits, 0, 3) . '-'. substr($digits, 3, 4);
    }

    return $phoneNumber;
  }
}
</code></pre>
<p>In lines 11-20 of the code above, we add the "phone" field to the <code>ContactForm</code> form model. The field
is a usual text input field, and we already had some experience of working with such fields earlier.</p>
<p>Then, in lines 26-40, we add a validation rule for the "phone" field of our form. Under the "filters"
key (line 29), we register the @<code>Callback</code>[Laminas\Filter\Callback] filter (here, we use the short alias @<code>Callback</code>[Laminas\Filter\Callback], but you
can alternatively use the fully qualified class name <code>Callback::class</code>).</p>
<p>The filter takes two options (line 32): the "callback" option and the "callback_params" option.
The "callback" option is an array consisting of two elements, which represent the class and the method to call, respectively. In this
example, the callback is the <code>filterPhone()</code> method of the <code>ContactForm</code> class. We pass the "format" parameter
to the callback method with the help of "callbackParams" option (line 34).</p>
<p>In lines 44-79, we define the <code>filterPhone()</code> callback method, which takes two arguments:
the <code>$value</code> is the phone number to filter, and the <code>$format</code> is the desired phone number format.
The <code>$format</code> parameter may either be 'local' (for local format) or 'intl' (for international format).</p>
<p>In the <code>filterPhone()</code> callback method, we do the following:</p>
<ul>
<li>
<p>First, in line 46, we check if the <code>$value</code> parameter is a scalar and not an array. If the value
    is not a scalar, we return it without change.</p>
</li>
<li>
<p>In line 53, we check the input value's length. We do nothing if the user entered an empty phone number;
    we just return it as is.</p>
</li>
<li>
<p>Then, we remove any non-digit characters (line 59).</p>
</li>
<li>
<p>If phone length is too short, we pad it with zeroes.</p>
</li>
<li>
<p>We add the braces, the dash, and the spaces for international phone numbers;
    or just the dash for local phone numbers.</p>
</li>
<li>
<p>Finally, we return the resulting phone number.</p>
</li>
</ul>
<p>To see how this filter works, you can open the "http://localhost/contactus" URL in your web browser.
If you enter some phone number in an incorrect format, the filter will fix the phone number and
transform it to the desired format.</p>
<h2 id="writing-your-own-filter">Writing Your Own Filter</h2>
<p>An alternative to using the @<code>Callback</code>[Laminas\Filter\Callback] filter is writing your own filter class
implementing the @<code>FilterInterface</code>[Laminas\Filter\FilterInterface] interface. Then, this filter may be used in
forms of your web application (or, if you wish, outside a form).</p>
<p>To demonstrate how to create your own filter, we will write the <code>PhoneFilter</code> class encapsulating
the phone filtering algorithm we used with the @<code>Callback</code>[Laminas\Filter\Callback] filter example.</p>
<blockquote>
<p>As you may remember, the base concrete class for all standard filters is the @<code>AbstractFilter</code>
class. By analogy, we will also derive our custom <code>PhoneFilter</code> filter from that base class.</p>
</blockquote>
<p>We plan to have the following methods in our <code>PhoneFilter</code> filter class (see table 8.18):</p>
<table>
<thead>
<tr>
<th><em>Method name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct($options)</code></td>
<td>Constructor - accepts an optional argument <code>$options</code>, which is needed to set filter options at once.</td>
</tr>
<tr>
<td><code>setFormat($format)</code></td>
<td>Sets the phone format option.</td>
</tr>
<tr>
<td><code>getFormat()</code></td>
<td>Returns the phone format option.</td>
</tr>
<tr>
<td><code>filter($value)</code></td>
<td>Runs the phone filter.</td>
</tr>
</tbody>
</table>
<p>Table 8.18. Public methods of the PhoneFilter filter</p>
<p>To start, create the <em>PhoneFilter.php</em> file in the <em>Filter</em> directory under
the module's source directory <sup id="fnref:phone_filter_service"><a class="footnote-ref" href="#fn:phone_filter_service">3</a></sup>. Put the following code
into that file:</p>
<pre><code class="language-php">&lt;?php
namespace Application\Filter;

use Laminas\Filter\AbstractFilter;

// This filter class is designed for transforming an arbitrary phone number to
// the local or the international format.
class PhoneFilter extends AbstractFilter
{
  // Phone format constants.
  const PHONE_FORMAT_LOCAL = 'local'; // Local phone format
  const PHONE_FORMAT_INTL  = 'intl';  // International phone format

  // Available filter options.
  protected $options = [
    'format' =&gt; self::PHONE_FORMAT_INTL
  ];

  // Constructor.
  public function __construct($options = null)
  {
    // Set filter options (if provided).
    if(is_array($options)) {

      if(isset($options['format']))
        $this-&gt;setFormat($options['format']);
    }
  }

  // Sets phone format.
  public function setFormat($format)
  {
    // Check input argument.
    if( $format!=self::PHONE_FORMAT_LOCAL &amp;&amp;
       $format!=self::PHONE_FORMAT_INTL ) {
      throw new \Exception('Invalid format argument passed.');
    }

    $this-&gt;options['format'] = $format;
  }

  // Returns phone format.
  public function getFormat()
  {
    return $this-&gt;format;
  }

  // Filters a phone number.
  public function filter($value)
  {
    if(!is_scalar($value)) {
      // Return non-scalar value unfiltered.
      return $value;
    }

    $value = (string)$value;

    if(strlen($value)==0) {
      // Return empty value unfiltered.
      return $value;
    }

    // First, remove any non-digit character.
    $digits = preg_replace('#[^0-9]#', '', $value);

    $format = $this-&gt;options['format'];

    if($format == self::PHONE_FORMAT_INTL) {
      // Pad with zeros if the number of digits is incorrect.
      $digits = str_pad($digits, 11, &quot;0&quot;, STR_PAD_LEFT);

      // Add the braces, the spaces, and the dash.
      $phoneNumber = substr($digits, 0, 1) . ' (' .
                     substr($digits, 1, 3) . ') ' .
                     substr($digits, 4, 3) . '-' .
                     substr($digits, 7, 4);
    } else { // self::PHONE_FORMAT_LOCAL
      // Pad with zeros if the number of digits is incorrect.
      $digits = str_pad($digits, 7, &quot;0&quot;, STR_PAD_LEFT);

      // Add the dash.
      $phoneNumber = substr($digits, 0, 3) . '-'. substr($digits, 3, 4);
    }

    return $phoneNumber;
  }
}
</code></pre>
<p>From line 2, you can see that the filter class lives in the <code>Application\Filter</code> namespace.</p>
<p>In line 8, we define the <code>PhoneFilter</code> class. We derive our filter class from
the @<code>AbstractFilter</code> base class to reuse the functionality it provides. Line 4 contains
the short alias for the @<code>AbstractFilter</code> class.</p>
<p>In lines 11-12, for convenience, we define the phone format constants (<code>PHONE_FORMAT_INTL</code> for
international format and <code>PHONE_FORMAT_LOCAL</code> for local format). These are the equivalents of the
"intl" and "local" strings, respectively.</p>
<p>In lines 15-17, we define the <code>$options</code> private variable, which is an array having the single key
named "format". This key will contain the phone format option for our filter.</p>
<p>In lines 20-28, we have the constructor method, which takes the single argument <code>$options</code>.
When constructing the filter manually, you may omit this parameter. However, when the filter is
constructed by the factory class, the factory will pass filter options to the filter's constructor
through this argument.</p>
<p>In lines 31-40 and 43-46, we have the <code>setFormat()</code> and <code>getFormat()</code> methods that allow to set and
retrieve the current phone format, respectively.</p>
<p>In lines 49-86, we have the <code>filter()</code> method. This method encapsulates the phone number filtering
algorithm. It takes the <code>$value</code> parameter, transforms it by taking the selected phone format in
account, and returns the formatted phone number.</p>
<h3 id="using-the-phonefilter-class">Using the PhoneFilter Class</h3>
<p>When the <code>PhoneFilter</code> filter class is ready, you can easily start using it in the feedback form
(or in another form) as follows. It is assumed that you call the following code inside of the
<code>ContactForm::addInputFilter()</code> method:</p>
<pre><code class="language-php">$inputFilter-&gt;add([
      'name'     =&gt; 'phone',
      'required' =&gt; true,
      'filters'  =&gt; [
        [
          'name' =&gt; PhoneFilter::class,
          'options' =&gt; [
            'format' =&gt; PhoneFilter::PHONE_FORMAT_INTL
          ]
        ],
        // ...
      ],
      // ...
    ]);
</code></pre>
<p>You can see how the <code>PhoneFilter</code> filter works in the <em>Form Demo</em> sample application bundled with
this book. Open the "http://localhost/contactus" page in your web browser. If you enter some phone
number in an incorrect format, the filter will fix the phone number.</p>
<p>If you wish, you can use the <code>PhoneFilter</code> outside of forms, as shown in the code example below:</p>
<pre><code class="language-php">&lt;?php
use Application\Filter\PhoneFilter;

// Create PhoneFilter filter.
$filter = new PhoneFilter();

// Configure the filter.
$filter-&gt;setFormat(PhoneFilter::PHONE_FORMAT_INTL);

// Filter a string.
$filteredValue = $filter-&gt;filter('12345678901');

// The expected filter's output is the '1 (234) 567-8901'.
</code></pre>
<h2 id="summary">Summary</h2>
<p>Filters are designed to take some input data, process it, and produce some output data.
Laminas Framework provides a lot of standard filters that can be used for creating filtering
rules of your forms (or, if you wish, to filter an arbitrary data outside of forms).</p>
<p>The standard filters can be roughly divided into several groups:</p>
<ul>
<li>filters casting input data to a specified type;</li>
<li>filters performing manipulations on a file path;</li>
<li>filters performing compression and encryption of input data;</li>
<li>filters manipulating string data; and</li>
<li>proxy filters wrapping other filters.</li>
</ul>
<p>If a standard filter is not suitable, it is possible to create a custom filter class.
In this chapter, we have provided an example of how to write your own <code>PhoneFilter</code> class
capable of filtering phone numbers.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:standard_filters">
<p>In this section, we only consider the standard filters belonging to the @<code>Laminas\Filter</code> namespace,
  although there are other filters that can also be considered standard. For example, the @<code>Laminas\Filter\File</code>[Laminas\Filter] namespace
  contains several filters applicable to processing file uploads (those filters will be covered in the next chapters).
  Additionally, the @<code>Laminas\I18n</code> component defines several filter classes that are aware of the user's locale.&#160;<a class="footnote-backref" href="#fnref:standard_filters" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:filter_inheritance">
<p>From figure 8.1, you may also notice that there are several more base filters: @<code>AbstractUnicode</code> filter is the base class
  for the @<code>StringToUpper</code> and @<code>StringToLower</code> filters, because it provides the string conversion functionality common to both of them.
  And, the @<code>Decompress</code> filter inherits from the @<code>Compress</code> filter, because these filters are in fact very similar.
  By analogy, the @<code>Decrypt</code>[Laminas\Filter\Decrypt] filter inherits from the @<code>Encrypt</code>[Laminas\Filter\Encrypt] filter, because they are the "mirror reflection" of each other as well.&#160;<a class="footnote-backref" href="#fnref:filter_inheritance" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:phone_filter_service">
<p>The <code>PhoneFilter</code> class may be considered as a service model because its goal is to
   process data, not to store it. By convention, we store all custom filters under the <code>Filter</code> directory.&#160;<a class="footnote-backref" href="#fnref:phone_filter_service" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../forms/" class="btn btn-neutral float-left" title="Collecting User Input with Forms"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../validators/" class="btn btn-neutral float-right" title="Checking Input Data with Validators">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/modir/laminas-book" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../forms/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../validators/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
